if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function l(a){return function(){return a}}var m,p=this;function q(a){return void 0!==a}function ca(){}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function fa(a){return null===a}function ga(a){return null!=a}function ha(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ia(a){return"string"==typeof a}function ja(a){return"function"==da(a)}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+(1E9*Math.random()>>>0),ma=0;function na(a,b,c){return a.call.apply(a.bind,arguments)}
function oa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function pa(a,b,c){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(null,arguments)}
function qa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function r(a,b){var c=a.split("."),d=p;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&q(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Xg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function ra(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ra);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}t(ra,Error);ra.prototype.name="CustomError";var sa=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};
function ta(a){var b=0,c=sa(String(ua)).split(".");a=sa(String(a)).split(".");for(var d=Math.max(c.length,a.length),e=0;0==b&&e<d;e++){var f=c[e]||"",h=a[e]||"",k=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var B=k.exec(f)||["","",""],O=n.exec(h)||["","",""];if(0==B[0].length&&0==O[0].length)break;b=va(0==B[1].length?0:parseInt(B[1],10),0==O[1].length?0:parseInt(O[1],10))||va(0==B[2].length,0==O[2].length)||va(B[2],O[2])}while(0==b)}return b}function va(a,b){return a<b?-1:a>b?1:0};function wa(a,b,c){this.rg=c;this.Rf=a;this.Mg=b;this.td=0;this.jd=null}wa.prototype.get=function(){var a;0<this.td?(this.td--,a=this.jd,this.jd=a.next,a.next=null):a=this.Rf();return a};wa.prototype.put=function(a){this.Mg(a);this.td<this.rg&&(this.td++,a.next=this.jd,this.jd=a)};var xa=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(ia(a))return ia(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ya=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},za=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ia(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Aa=Array.prototype.reduce?function(a,b,c,d){d&&(b=pa(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ya(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Ba=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ia(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1};
function Ca(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Da(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ea(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==da(d))for(var e=0;e<d.length;e+=8192)for(var f=Ea.apply(null,Ca(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Fa(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};var Ga;a:{var Ha=p.navigator;if(Ha){var Ia=Ha.userAgent;if(Ia){Ga=Ia;break a}}Ga=""}function u(a){return-1!=Ga.indexOf(a)};function Ja(){return u("Opera")||u("OPR")}function Ka(){return(u("Chrome")||u("CriOS"))&&!Ja()&&!u("Edge")};function La(a){p.setTimeout(function(){throw a;},0)}var Na;
function Oa(){var a=p.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!u("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=pa(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!u("Trident")&&!u("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(q(c.next)){c=c.next;var a=c.Ge;c.Ge=null;a()}};return function(a){d.next={Ge:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){p.setTimeout(a,0)}};function Pa(){this.Dd=this.rc=null}var Ra=new wa(function(){return new Qa},function(a){a.reset()},100);Pa.prototype.add=function(a,b){var c=Ra.get();c.set(a,b);this.Dd?this.Dd.next=c:this.rc=c;this.Dd=c};Pa.prototype.remove=function(){var a=null;this.rc&&(a=this.rc,this.rc=this.rc.next,this.rc||(this.Dd=null),a.next=null);return a};function Qa(){this.next=this.scope=this.Vd=null}Qa.prototype.set=function(a,b){this.Vd=a;this.scope=b;this.next=null};
Qa.prototype.reset=function(){this.next=this.scope=this.Vd=null};function Sa(a,b){Ta||Ua();Va||(Ta(),Va=!0);Wa.add(a,b)}var Ta;function Ua(){if(p.Promise&&p.Promise.resolve){var a=p.Promise.resolve(void 0);Ta=function(){a.then(Xa)}}else Ta=function(){var a=Xa;!ja(p.setImmediate)||p.Window&&p.Window.prototype&&!u("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(Na||(Na=Oa()),Na(a)):p.setImmediate(a)}}var Va=!1,Wa=new Pa;function Xa(){for(var a=null;a=Wa.remove();){try{a.Vd.call(a.scope)}catch(b){La(b)}Ra.put(a)}Va=!1};function v(a,b){this.Sa=0;this.qf=void 0;this.Yc=this.gc=this.F=null;this.hd=this.Td=!1;if(a!=ca)try{var c=this;a.call(b,function(a){Ya(c,2,a)},function(a){Ya(c,3,a)})}catch(d){Ya(this,3,d)}}function Za(){this.next=this.context=this.lc=this.Lc=this.child=null;this.Gd=!1}Za.prototype.reset=function(){this.context=this.lc=this.Lc=this.child=null;this.Gd=!1};var $a=new wa(function(){return new Za},function(a){a.reset()},100);function ab(a,b,c){var d=$a.get();d.Lc=a;d.lc=b;d.context=c;return d}
function w(a){if(a instanceof v)return a;var b=new v(ca);Ya(b,2,a);return b}function bb(a){return new v(function(b,c){c(a)})}function cb(a,b,c){db(a,b,c,null)||Sa(qa(b,a))}function eb(a){return new v(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,n;k<a.length;k++)n=a[k],cb(n,qa(f,k),h);else b(e)})}function fb(){var a,b,c=new v(function(c,e){a=c;b=e});return new gb(c,a,b)}
v.prototype.then=function(a,b,c){return hb(this,ja(a)?a:null,ja(b)?b:null,c)};v.prototype.then=v.prototype.then;v.prototype.$goog_Thenable=!0;v.prototype.we=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.gc||2!=a.Sa&&3!=a.Sa||jb(a);a.Yc?a.Yc.next=b:a.gc=b;a.Yc=b}
function hb(a,b,c,d){var e=ab(null,null,null);e.child=new v(function(a,h){e.Lc=b?function(c){try{var e=b.call(d,c);a(e)}catch(B){h(B)}}:a;e.lc=c?function(b){try{var e=c.call(d,b);!q(e)&&b instanceof kb?h(b):a(e)}catch(B){h(B)}}:h});e.child.F=a;ib(a,e);return e.child}v.prototype.Sg=function(a){this.Sa=0;Ya(this,2,a)};v.prototype.Tg=function(a){this.Sa=0;Ya(this,3,a)};
function Ya(a,b,c){0==a.Sa&&(a==c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Sa=1,db(c,a.Sg,a.Tg,a)||(a.qf=c,a.Sa=b,a.F=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function db(a,b,c,d){if(a instanceof v)return ib(a,ab(b||ca,c||null,d)),!0;var e;if(a)try{e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ja(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(n){f(n)}}function jb(a){a.Td||(a.Td=!0,Sa(a.Yf,a))}function nb(a){var b=null;a.gc&&(b=a.gc,a.gc=b.next,b.next=null);a.gc||(a.Yc=null);return b}
v.prototype.Yf=function(){for(var a=null;a=nb(this);){var b=this.Sa,c=this.qf;if(3==b&&a.lc&&!a.Gd)for(var d=void 0,d=this;d&&d.hd;d=d.F)d.hd=!1;if(a.child)a.child.F=null,ob(a,b,c);else try{a.Gd?a.Lc.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}$a.put(a)}this.Td=!1};function ob(a,b,c){2==b?a.Lc.call(a.context,c):a.lc&&a.lc.call(a.context,c)}function lb(a,b){a.hd=!0;Sa(function(){a.hd&&pb.call(null,b)})}var pb=La;function kb(a){ra.call(this,a)}t(kb,ra);kb.prototype.name="cancel";
function gb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function qb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],k=0;k<e+1;k++)h[k]=[],h[k][0]=0;for(var n=0;n<f+1;n++)h[0][n]=0;for(k=1;k<=e;k++)for(n=1;n<=f;n++)c(a[k-1],b[n-1])?h[k][n]=h[k-1][n-1]+1:h[k][n]=Math.max(h[k-1][n],h[k][n-1]);for(var B=[],k=e,n=f;0<k&&0<n;)c(a[k-1],b[n-1])?(B.unshift(d(k-1,n-1)),k--,n--):h[k-1][n]>h[k][n-1]?k--:n--;return B}function rb(a){return Aa(arguments,function(a,c){return a+c},0)}
function sb(a){return rb.apply(null,arguments)/arguments.length}function tb(a){var b=arguments.length;if(2>b)return 0;var c=sb.apply(null,arguments);return rb.apply(null,za(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function ub(a){return Math.sqrt(tb.apply(null,arguments))};var vb="StopIteration"in p?p.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw vb;};wb.prototype.sc=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.sc)return a.sc(!1);if(ha(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw vb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function yb(a,b){if(ha(a))try{ya(a,b,void 0)}catch(c){if(c!==vb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==vb)throw c;}}}function zb(a){if(Ba(arguments,function(a){return!a.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=Da(c.length);b.next=function(){if(d){for(var a=za(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw vb;};return b};function Ab(a,b){this.l={};this.a=[];this.Ta=this.Gb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Ab.prototype;m.Cc=g("Gb");m.ra=function(){Bb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.l[this.a[b]]);return a};function Eb(a){Bb(a);return a.a.concat()}m.Oa=function(a){return Fb(this.l,a)};m.md=function(){return 0==this.Gb};
m.clear=function(){this.l={};this.Ta=this.Gb=this.a.length=0};m.remove=function(a){return Fb(this.l,a)?(delete this.l[a],this.Gb--,this.Ta++,this.a.length>2*this.Gb&&Bb(this),!0):!1};function Bb(a){if(a.Gb!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Fb(a.l,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Gb!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],Fb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}m.get=function(a,b){return Fb(this.l,a)?this.l[a]:b};
m.set=function(a,b){Fb(this.l,a)||(this.Gb++,this.a.push(a),this.Ta++);this.l[a]=b};m.addAll=function(a){var b;if(a instanceof Ab)b=Eb(a),a=a.ra();else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Fa(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Eb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Ab(this)};
m.sc=function(a){Bb(this);var b=0,c=this.Ta,d=this,e=new wb;e.next=function(){if(c!=d.Ta)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw vb;var e=d.a[b++];return a?e:d.l[e]};return e};function Fb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Gb(){return u("iPhone")&&!u("iPod")&&!u("iPad")};var Hb=Ja(),Ib=u("Trident")||u("MSIE"),Jb=u("Edge"),Kb=u("Gecko")&&!(-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge"))&&!(u("Trident")||u("MSIE"))&&!u("Edge"),Lb=-1!=Ga.toLowerCase().indexOf("webkit")&&!u("Edge");function Mb(){var a=Ga;if(Kb)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Jb)return/Edge\/([\d\.]+)/.exec(a);if(Ib)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Lb)return/WebKit\/(\S+)/.exec(a)}
var ua=function(){if(Hb&&p.opera){var a;var b=p.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Mb())&&(a=b?b[1]:"");return Ib&&(b=(b=p.document)?b.documentMode:void 0,null!=b&&b>parseFloat(a))?String(b):a}(),Nb={};var Ob=Gb()||u("iPod"),Pb=u("iPad"),Qb=Ka(),Rb=u("Safari")&&!(Ka()||u("Coast")||Ja()||u("Edge")||u("Silk")||u("Android"))&&!(Gb()||u("iPad")||u("iPod"));/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Sb(){this.qe=Rb||Pb||Ob;this.hg=!(this.qe||Ib&&!Nb[10]&&!(Nb[10]=0<=ta(10)));!Ib||Nb[11]||(Nb[11]=0<=ta(11));this.Wg=Qb||Rb;this.wg=q(window.Map)&&q(window.Map.prototype.values)&&q(window.Map.prototype.forEach)&&!this.qe;this.xg=q(window.Set)&&q(window.Set.prototype.values)&&q(window.Set.prototype.forEach)&&!this.qe}var Tb;function Ub(){q(Tb)||(Tb=new Sb);return Tb};function x(){this.l=new Ab;Object.defineProperty(this,"size",{get:function(){return this.l.Cc()}})}x.prototype.clear=function(){this.l.clear()};x.prototype.clear=x.prototype.clear;x.prototype.delete=function(a){return this.l.remove(a)};x.prototype["delete"]=x.prototype.delete;x.prototype.forEach=function(a,b){return this.l.forEach(a,b)};x.prototype.forEach=x.prototype.forEach;x.prototype.get=function(a){return this.l.get(a)};x.prototype.get=x.prototype.get;x.prototype.has=function(a){return this.l.Oa(a)};
x.prototype.has=x.prototype.has;x.prototype.set=function(a,b){return this.l.set(a,b)};x.prototype.set=x.prototype.set;var Vb=Ub().wg;function y(){return Vb?new window.Map:new x}function Wb(a){if(a instanceof x)return Eb(a.l);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){if(a instanceof x)return a.l.ra();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function Xb(a,b){this.sa=a;this.m=b||this.Le()}var Yb=0;m=Xb.prototype;m.id=g("sa");m.Le=function(){return{}};m.yf=g("m");m.Ja=function(){return{id:this.sa,value:this.yf()}};m.pb=function(a){return"#"==a.substr(-1)?this.sa:null};function Zb(a){return new Xb(a.id,a.value)}function $b(a){return new Xb(Yb++,a||{})}function ac(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c)var d=a[c].toString(16),b=b+(2>d.length?"0"+d:d);return b};var bc={};r("lf.TransactionType",bc);bc.READ_ONLY=0;bc.READ_WRITE=1;function A(a,b,c,d,e){this.yd=a;this.lg=b;this.Vg=c;this.Tf=d;this.Lf=e}r("lf.TransactionStats",A);A.prototype.Qg=g("yd");A.prototype.success=A.prototype.Qg;A.prototype.kg=g("lg");A.prototype.insertedRowCount=A.prototype.kg;A.prototype.Ug=g("Vg");A.prototype.updatedRowCount=A.prototype.Ug;A.prototype.Sf=g("Tf");A.prototype.deletedRowCount=A.prototype.Sf;A.prototype.Kf=g("Lf");A.prototype.changedTableCount=A.prototype.Kf;function cc(a,b){this.Ad=a;this.Qa=b||null;this.S=fb();this.yd=!1;this.za=null}cc.prototype.ka=function(){return(0==this.Ad?this.vc():dc(this)).then(function(a){this.yd=!0;return a}.bind(this))};function dc(a){try{ec(a.Qa)}catch(b){return bb(b)}return gc(a).then(function(a){this.Qa.ka();return a}.bind(a))}function gc(a){hc(a);ic(a);return a.vc()}
function hc(a){a.Qa.ib.forEach(function(a,c){var d=this.Qa.da().get(c),d=this.H(d.getName(),d.mb.bind(d),0),e=z(a.xa).map(function(a){return a.id()});0<e.length&&d.remove(e).we(this.Te,this);e=z(a.ma).map(function(a){return a[1]}).concat(z(a.wa));d.put(e).we(this.Te,this)},a)}function ic(a){jc(a.Qa).forEach(function(a){var c=this.H(a.getName(),Zb,1);c.remove([]);c.put(a.Ja())},a)}cc.prototype.Te=function(a){this.S.reject(a)};
cc.prototype.Y=function(){if(null===this.za)if(this.yd)if(0==this.Ad)this.za=new A(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Qa.ib.forEach(function(e){d++;a+=e.wa.size;c+=e.ma.size;b+=e.xa.size});this.za=new A(!0,a,c,b,d)}else this.za=new A(!1,0,0,0,0);return this.za};function kc(a){this.Ng=a}kc.prototype.toString=g("Ng");var lc=new kc("backstore"),mc=new kc("cache"),nc=new kc("indexstore"),oc=new kc("engine"),pc=new kc("runner"),qc=new kc("observerregistry"),rc=new kc("schema");function sc(a){if(a.ra&&"function"==typeof a.ra)return a.ra();if(ia(a))return a.split("");if(ha(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Fa(a)};function tc(a){this.l=new Ab;a&&this.addAll(a)}function uc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ka(a):b.substr(0,1)+a}m=tc.prototype;m.Cc=function(){return this.l.Cc()};m.add=function(a){this.l.set(uc(a),a)};m.addAll=function(a){a=sc(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.l.remove(uc(a))};m.clear=function(){this.l.clear()};m.md=function(){return this.l.md()};m.contains=function(a){return this.l.Oa(uc(a))};m.ra=function(){return this.l.ra()};
m.clone=function(){return new tc(this)};m.sc=function(){return this.l.sc(!1)};function vc(a){this.$b=new tc(a);Object.defineProperty(this,"size",{get:function(){return this.$b.Cc()}})}vc.prototype.add=function(a){this.$b.add(a)};vc.prototype.add=vc.prototype.add;vc.prototype.clear=function(){this.$b.clear()};vc.prototype.clear=vc.prototype.clear;vc.prototype.delete=function(a){return this.$b.remove(a)};vc.prototype["delete"]=vc.prototype.delete;vc.prototype.forEach=function(a,b){this.$b.ra().forEach(a,b)};vc.prototype.has=function(a){return this.$b.contains(a)};
vc.prototype.has=vc.prototype.has;var wc=Ub().xg;function C(a){return wc?q(a)?new window.Set(a):new window.Set:new vc(a)}function D(a){if(a instanceof vc)return a.$b.ra();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function xc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function yc(a,b){this.sa=a;this.m=b||{}}function zc(a){var b=C();a.forEach(function(a){b.add(a>>9)});return D(b)}yc.prototype.W=g("sa");function Ac(a,b){b.forEach(function(a){this.m[a.id()]=a.Ja()},a)}function Bc(a,b){b.forEach(function(a){delete this.m[a]},a)}yc.prototype.Ja=function(){return{id:this.sa,value:JSON.stringify(this.m)}};function Cc(a){return new yc(a.id,JSON.parse(a.value))};function Dc(a,b,c){this.Z=a;this.Ib=b;this.rf=c}m=Dc.prototype;m.get=function(a){if(0==a.length)return this.Wd();var b=this.Ib;return Ec(this,a).then(function(c){return a.map(function(a){var e=c.get(a>>9);return b(e.m[a])})})};function Ec(a,b){var c=y(),d=fb(),e=zc(b).map(function(a){return new v(function(b,d){var e;try{e=this.Z.get(a)}catch(B){d(B);return}e.onerror=d;e.onsuccess=function(a){a=Cc(a.target.result);c.set(a.W(),a);b()}},this)},a);eb(e).then(function(){d.resolve(c)});return d.ha}
m.Wd=function(){return new v(function(a,b){var c=[],d;try{d=this.Z.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f;f=Cc(b.value).m;for(var h in f)c.push(this.Ib(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Wb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return w();var b=y();a.forEach(function(a){var d;d=a.id()>>9;var e=b.get(d)||null;null===e&&(e=this.rf(this.Z.name,d));Ac(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Wb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return eb(a)};
m.remove=function(a){if(0==a.length)return this.Wb(function(){return this.Z.clear()}.bind(this));var b=y();a.forEach(function(a){var d=a>>9,e=b.get(d)||null;null===e&&(e=this.rf(this.Z.name,d));Bc(e,[a]);b.set(d,e)},this);a=z(b).map(function(a){return this.Wb(function(){return 0==Object.keys(a.m).length?this.Z.delete(a.W()):this.Z.put(a.Ja())}.bind(this))},this);return eb(a)};function Fc(a,b,c){a=a.b(mc);var d=[c<<9,(c+1<<9)-1];b=a.Ua(b,d[0],d[1]);c=new yc(c);Ac(c,b);return c}
function Gc(a,b){return new yc(b)};function Hc(a){this.V=a.b(mc);this.D=a.b(nc);this.g=a.b(rc)}Hc.prototype.update=function(a){a.forEach(function(a){Ic(this,a);Jc(this,a)},this)};function Jc(a,b){var c=b.getName();b.xa.forEach(function(a,b){this.V.remove(c,b)},a);b.wa.forEach(function(a){this.V.set(c,a)},a);b.ma.forEach(function(a){this.V.set(c,a[1])},a)}function Ic(a,b){var c=a.g.table(b.getName());Kc(b).forEach(function(a){Lc(this,c,a)},a)}
function Lc(a,b,c){var d=a.D.oc.get(b.getName())||[],e=0;d.forEach(function(a){try{Mc(a,c),e++}catch(b){throw d.slice(0,e).forEach(function(a){Mc(a,[c[1],c[0]])},this),b;}},a)}function Mc(a,b){var c=null===b[1]?void 0:b[1].pb(a.getName()),d=null===b[0]?void 0:b[0].pb(a.getName());if(!q(d)&&q(c))a.add(c,b[1].id());else if(q(d)&&q(c)){if(null===c||null===d){if(c==d)return}else if(0==a.lb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else q(d)&&!q(c)&&a.remove(d,b[0].id())};var Nc={};r("lf.ConstraintAction",Nc);Nc.RESTRICT=0;Nc.CASCADE=1;var Oc={};r("lf.ConstraintTiming",Oc);Oc.IMMEDIATE=0;Oc.DEFERRABLE=1;var Pc={};r("lf.Order",Pc);Pc.DESC=0;Pc.ASC=1;var Qc={};r("lf.Type",Qc);Qc.ARRAY_BUFFER=0;Qc.BOOLEAN=1;Qc.DATE_TIME=2;Qc.INTEGER=3;Qc.NUMBER=4;Qc.STRING=5;Qc.OBJECT=6;var Rc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};r("lf.type.DEFAULT_VALUES",Rc);function E(a,b){this.code=a;this.message="http://sn.im/2a0j3wn?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(arguments[c].toString().slice(0,64))}t(E,Error);function Sc(){this.l=y();this.size=0}m=Sc.prototype;m.has=function(a){return this.l.has(a)};m.set=function(a,b){var c=this.l.get(a)||null;null===c&&(c=C(),this.l.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Zb=function(a,b){var c=this.l.get(a)||null;null===c&&(c=C(),this.l.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this);return this};m.ce=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Zb(b,c)},this);return this};
m.delete=function(a,b){var c=this.l.get(a)||null;if(null===c)return!1;var d=c.delete(b);d&&(--this.size,0==c.size&&this.l.delete(a));return d};m.get=function(a){a=this.l.get(a)||null;return null===a?null:D(a)};m.clear=function(){this.l.clear();this.size=0};m.keys=function(){return Wb(this.l)};m.values=function(){var a=[];this.l.forEach(function(b){a.push.apply(a,D(b))});return a};function Tc(a){this.D=a.b(nc);this.g=a.b(rc);this.V=a.b(mc);this.bd=null}function Vc(a,b,c){var d=b.Jb().zg;c.forEach(function(a){d.forEach(function(b){if(null==a.m[b.getName()])throw new E(202,b.j());},this)},a)}function Wc(a,b,c,d){b.Jb().Xd().forEach(function(a){a.timing==d&&Xc(this,a,c)},a)}function Xc(a,b,c){var d=Yc(a,b);c.forEach(function(a){if(Zc(a[0],a[1],b.name)&&(a=a[1].pb(b.name),null!==a&&!d.Oa(a)))throw new E(203,b.name);},a)}
function Yc(a,b){null===a.bd&&(a.bd=y());var c=a.bd.get(b.name)||null;null===c&&(c=a.g.table(b.Wa)[b.Mc].Ca(),c=a.D.get(c.j()),a.bd.set(b.name,c));return c}function Zc(a,b,c){return(null===a?null!==b:null===b)||a.pb(c)!=b.pb(c)}function $c(a,b,c,d){b=ad(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&bd(a,b,c,function(a,b,c){if(b.Oa(c))throw new E(203,a.name);}))}
function cd(a,b,c){b=ad(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Sc;bd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Zb(a.He,b)});return d}function dd(a,b,c){var d=new Sc;bd(a,c,b,function(a,b,c,k){b.get(c).forEach(function(b){d.set(b,{Ud:a,Eg:k[1]})})});return d}function bd(a,b,c,d){b.forEach(function(a){var b=this.D.get(a.name),h=Yc(this,a);c.forEach(function(c){if(Zc(c[0],c[1],h.getName())){var n=c[0].pb(h.getName());d(a,b,n,c)}},this)},a)}
function ed(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Wc(a,b,c,d))}function fd(a,b,c,d){0!=c.length&&(Wc(a,b,c,d),$c(a,b,c,d))}function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),$c(a,b,c,d))}
function hd(a,b,c){var d={ve:[],tf:new Sc},e=new Sc;e.Zb(b.getName(),c.map(function(a){return a.id()}));do{var f=new Sc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=cd(this,b,a);null!==b&&(d.ve.unshift.apply(d.ve,b.keys()),f.ce(b))},a);e=f;d.tf.ce(e)}while(0<e.size);return d};function id(a){this.wa=y();this.ma=y();this.xa=y();this.A=a}m=id.prototype;m.getName=g("A");m.add=function(a){if(this.xa.has(a.id())){var b=[this.xa.get(a.id()),a];this.ma.set(a.id(),b);this.xa.delete(a.id())}else this.wa.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.wa.has(c)?this.wa.set(c,b):(this.ma.has(c)&&(a=[this.ma.get(a[0].id())[0],b]),this.ma.set(c,a))};
m.delete=function(a){if(this.wa.has(a.id()))this.wa.delete(a.id());else if(this.ma.has(a.id())){var b=this.ma.get(a.id())[0];this.ma.delete(a.id());this.xa.set(a.id(),b)}else this.xa.set(a.id(),a)};m.ce=function(a){a.wa.forEach(function(a){this.add(a)},this);a.ma.forEach(function(a){this.modify(a)},this);a.xa.forEach(function(a){this.delete(a)},this)};
function Kc(a){var b=[];a.wa.forEach(function(a){b.push([null,a])});a.ma.forEach(function(a){b.push(a)});a.xa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+Wb(this.wa).toString()+"], ["+Wb(this.ma).toString()+"], ["+Wb(this.xa).toString()+"]"};function jd(a){var b=new id(a.A);a.wa.forEach(function(a){b.delete(a)});a.xa.forEach(function(a){b.add(a)});a.ma.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.md=function(){return 0==this.wa.size&&0==this.xa.size&&0==this.ma.size};function kd(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(rc);this.V=a.b(mc);this.D=a.b(nc);this.Aa=new Tc(a);this.kd=new Hc(a);this.ib=y()}function jc(a){var b=[];Wb(a.ib).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Fb()&&(a.Da().forEach(function(a){b.push(this.D.get(a.j()))},this),b.push(this.D.get(a.getName()+".#")))},a);return b}m=kd.prototype;m.da=g("aa");
m.Db=function(a,b){ld(this,a);Vc(this.Aa,a,b);ed(this.Aa,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[null,b[c]])};function md(a,b,c){var d=b.getName(),e=a.ib.get(d)||new id(d);a.ib.set(d,e);try{Lc(a.kd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){ld(this,a);Vc(this.Aa,a,b);var c=b.map(function(a){return[this.V.get(a.id()),a]},this);nd(this,a,c);fd(this.Aa,a,c,0);c.forEach(function(b){md(this,a,b)},this)};m.Yd=function(a,b){ld(this,a);Vc(this.Aa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f,h=a.Jb().ed();if(null===h)f=null;else{f=this.Aa;var h=h.j(),k=d.pb(h);f=f.D.get(h).get(k);f=0==f.length?null:f[0]}null!=f?(e=this.V.get(f),d.sa=f,fd(this.Aa,a,[[e,d]],0)):ed(this.Aa,a,[d],0);md(this,a,[e,d])}};
m.remove=function(a,b){ld(this,a);od(this,a,b);gd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)md(this,a,[b[c],null])};function nd(a,b,c){b=ad(a.g.info(),b.getName(),1);if(null!==b){var d=dd(a.Aa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Ud.He),d=this.V.get(a),n=c.mb(d.Ja());n.m[b.Ud.yb]=b.Eg.m[b.Ud.Mc];md(this,c,[d,n])},this)},a)}}
function od(a,b,c){if(null!==ad(a.g.info(),b.getName(),1)){b=hd(a.Aa,b,c);var d=b.tf;b.ve.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);gd(this.Aa,b,a,0);a.forEach(function(a){md(this,b,[a,null])},this)},a)}}function ec(a){a.ib.forEach(function(a){var c=this.aa.get(a.getName());ed(this.Aa,c,z(a.wa),1);gd(this.Aa,c,z(a.xa),1);fd(this.Aa,c,z(a.ma),1)},a)}m.ka=aa();m.Mb=function(){var a=z(this.ib).map(function(a){return jd(a)});this.kd.update(a)};
function ld(a,b){if(!a.aa.has(b.getName()))throw new E(106,b.getName());};function F(a,b,c,d){this.from=a;this.o=b;this.ea=this.from==G?!1:c;this.oa=this.o==G?!1:d}var G=new (aa());F.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==G?"unbound":this.from)+", "+(this.o==G?"unbound":this.o)+(this.oa?")":"]")};function pd(a){if(qd(a))return[];var b=null,c=null;a.from==G||(b=new F(G,a.from,!1,!a.ea));a.o==G||(c=new F(a.o,G,!a.oa,!1));return[b,c].filter(function(a){return null!==a})}F.prototype.reverse=function(){return new F(this.o,this.from,this.oa,this.ea)};
function rd(a,b){var c=sd(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b,c=1==c?a:b;return d.o==G||d.o>c.from||d.o==c.from&&!d.oa&&!c.ea}function td(){return new F(G,G,!1,!1)}function qd(a){return a.from==G&&a.o==G}function ud(a){return a.from==a.o&&a.from!=G&&!a.ea&&!a.oa}F.prototype.contains=function(a){var b=this.o==G||a<this.o||a==this.o&&!this.oa;return(this.from==G||a>this.from||a==this.from&&!this.ea)&&b};
function sd(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==G?b==G?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==G?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function vd(a,b){var c=sd(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=sd(a.o,b.o,!1,a.oa,b.oa));return c}function wd(a){if(0==a.length)return[];a.sort(vd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new F(G,a[c].from,!1,!0):c==b.length-1?new F(a[c-1].o,G,!0,!1):new F(a[c-1].o,a[c].from,!0,!0);return b};function xd(a){this.nc=[];q(a)&&this.add(a)}xd.prototype.toString=function(){return this.nc.map(function(a){return a.toString()}).join(",")};xd.prototype.Oa=function(a){return this.nc.some(function(b){return b.contains(a)})};xd.prototype.ra=g("nc");
xd.prototype.add=function(a){if(0!=a.length)if(a=this.nc.concat(a),1==a.length)this.nc=a;else{a.sort(vd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(rd(c,a[d])){var e=a[d],f=td();if(c.from!=G&&e.from!=G){var h=sd(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.o!=G&&e.o!=G&&(h=sd(c.o,e.o,!1),-1!=h?(f.o=c.o,f.oa=0!=h?c.oa:c.oa&&e.oa):(f.o=e.o,f.oa=e.oa));c=f}else b.push(c),c=a[d];b.push(c);this.nc=b}};
function yd(a,b){var c=[];a.ra().map(function(a){return b.ra().map(function(b){var c;if(rd(a,b)){c=td();var h=sd(a.from,b.from,!0),h=0==h?a.ea?a:b:-1!=h?a:b;c.from=h.from;c.ea=h.ea;a.o==G||b.o==G?b=a.o==G?b:a:(h=sd(a.o,b.o,!1),b=0==h?a.oa?a:b:-1==h?a:b);c.o=b.o;c.oa=b.oa}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new xd(c.filter(function(a){return null!==a}))};function H(a,b){this.entries=a;this.M=C(b);this.Za=null}H.prototype.s=function(){return D(this.M)};function zd(a){return a.entries.map(function(a){return a.va.m})}function Ad(a){return a.entries.map(function(a){return a.va.id()})}function Bd(a,b){return a.Za.get(b.j())}var Cd=null;function Dd(){null===Cd&&(Cd=new H([],[]));return Cd}
function Ed(a){if(0==a.length)return Dd();for(var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0,b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b}),e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new H(z(e),D(a[0].M))}function Fd(a){if(0==a.length)return Dd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new H(z(b),D(a[0].M))}
function Gd(a,b){var c=1<b.length,d=a.map(function(a){return new Hd(a,c)});return new H(d,b)}function Hd(a,b){this.va=a;this.id=Id++;this.$d=b}var Id=0;function I(a,b){var c=b.$a();return null!==c&&a.va.m.hasOwnProperty(c)?a.va.m[c]:a.$d?a.va.m[Jd(b.H())][b.getName()]:a.va.m[b.getName()]}function Kd(a,b,c){var d=b.$a();if(null!=d)a.va.m[d]=c;else if(a.$d){var d=Jd(b.H()),e=a.va.m[d];null==e&&(e={},a.va.m[d]=e);e[b.getName()]=c}else a.va.m[b.getName()]=c}
function Ld(a,b,c,d){function e(a,b){if(a.$d){var c=a.va.m,d;for(d in c)f[d]=c[d]}else f[b[0]]=a.va.m}var f={};e(a,b);e(c,d);a=new Xb(-1,f);return new Hd(a,!0)};r("lf.bind",function(a){return new Md(a)});function Md(a){this.fa=a}r("lf.Binder",Md);Md.prototype.Ca=g("fa");function Nd(){this.Ze=Od();var a=Pd();this.Qb=y();this.Qb.set(1,Qd());this.Qb.set(2,Rd());this.Qb.set(4,a);this.Qb.set(3,a);this.Qb.set(5,Sd());this.Qb.set(6,Td())}var Ud;function Vd(){null!=Ud||(Ud=new Nd);return Ud}function Wd(a,b,c){a=a.Qb.get(b)||null;if(null===a)throw new E(550);c=a.get(c)||null;if(null===c)throw new E(550);return c}
function Od(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Qd(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Pd(){var a=Qd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Sd(){var a=Pd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Td(){var a=y();a.set("eq",function(a,c){if(null!==c)throw new E(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new E(550);return null!==a});return a}
function Rd(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(c){return c.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function J(){this.h=this.F=null}var Xd=[];J.prototype.getParent=g("F");J.prototype.ab=function(){for(var a=this;!fa(a.getParent());)a=a.getParent();return a};function Yd(a){for(var b=0;!fa(a.getParent());)b++,a=a.getParent();return b}function K(a){return a.h||Xd}function Zd(a,b){return K(a)[b]||null}function $d(a,b,c){b.F=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function L(a,b){b.F=a;null===a.h?a.h=[b]:a.h.push(b)}
function ae(a,b){var c=a.h&&a.h[b];return c?(c.F=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}J.prototype.removeChild=function(a){return ae(this,K(this).indexOf(a))};function be(a,b,c){Zd(a,c).F=null;b.F=a;a.h[c]=b}function ce(a,b,c){!1!==b.call(c,a)&&K(a).forEach(function(a){ce(a,b,c)})};function de(){J.call(this);this.sa=ee++}t(de,J);var ee=0;de.prototype.W=g("sa");function fe(a,b,c){de.call(this);this.J=a;this.value=b;this.C=c;this.yc=Wd(Vd(),this.J.I(),this.C);this.Va=!1;this.fc=b}t(fe,de);m=fe.prototype;m.Pb=function(){var a=new fe(this.J,this.value,this.C);a.fc=this.fc;a.xd(this.Va);var b=this.W();a.sa=b;return a};m.nb=function(a){return null!=a?(a.push(this.J),a):[this.J]};m.s=function(a){a=null!=a?a:C();a.add(this.J.H());return a};m.xd=ba("Va");
function ge(a){var b=!1;a.value instanceof Md||(b="array"==da(a.value)?!a.value.some(function(a){return a instanceof Md}):!0);if(!b)throw new E(501);}m.eval=function(a){ge(this);if("in"==this.C)return he(this,a);var b=a.entries.filter(function(a){return this.yc(I(a,this.J),this.value)!=this.Va},this);return new H(b,a.s())};
m.bind=function(a){if(this.fc instanceof Md){var b=this.fc.Ca();if(a.length<=b)throw new E(510);this.value=a[b]}else"array"==da(this.fc)&&(this.value=this.fc.map(function(b){if(b instanceof Md){var d=b.Ca();if(a.length<=d)throw new E(510);return a[b.Ca()]}return b}))};function he(a,b){var c=C(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Va}.bind(a),e=b.entries.filter(function(a){return d(I(a,this.J))},a);return new H(e,b.s())}
m.toString=function(){return"value_pred("+this.J.j()+" "+this.C+(this.Va?"(complement)":"")+" "+this.value+")"};m.od=function(){ge(this);return null!==this.value&&("between"==this.C||"in"==this.C||"eq"==this.C||"gt"==this.C||"gte"==this.C||"lt"==this.C||"lte"==this.C)};
m.xe=function(){var a=null;if("between"==this.C)a=new F(ie(this,this.value[0]),ie(this,this.value[1]),!1,!1);else{if("in"==this.C)return a=this.value.map(function(a){return new F(a,a,!1,!1)}),new xd(this.Va?wd(a):a);a=ie(this,this.value);a="eq"==this.C?new F(a,a,!1,!1):"gte"==this.C?new F(a,G,!1,!1):"gt"==this.C?new F(a,G,!0,!1):"lte"==this.C?new F(G,a,!1,!1):new F(G,a,!1,!0)}return new xd(this.Va?pd(a):[a])};function ie(a,b){return 2==a.J.I()?b.getTime():b};function je(a){this.ba=a;this.Zc=this.Ga=null}function ke(a,b){null===a.Ga&&null!=a.w&&(a.Ga=le(a.w));return a.Ga.get(b)||null}function le(a){var b=y();ce(a,function(a){b.set(a.W(),a)});return b}function me(a,b){b.w&&(a.w=b.w.Pb());a.Zc=b}je.prototype.bind=function(){return this};function oe(a,b){var c=a.w;null!=c&&ce(c,function(a){a instanceof fe&&a.bind(b)})};function pe(a){je.call(this,a)}t(pe,je);function qe(a){var b="";a.forEach(function(c,d){b+=c.J.j()+" ";b+=1==c.sb?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}pe.prototype.da=function(){return C(this.from)};pe.prototype.clone=function(){var a=new pe(this.ba);me(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.X=this.X;a.L=this.L;this.N&&(a.N=this.N.slice());this.la&&(a.la=this.la.slice());this.Vb&&(a.Vb=this.Vb);this.bc&&(a.bc=this.bc);a.cb=this.cb;return a};
pe.prototype.bind=function(a){pe.hb.bind.call(this,a);null!=this.Vb&&(this.X=a[this.Vb.Ca()]);null!=this.bc&&(this.L=a[this.bc.Ca()]);oe(this,a);return this};function re(a,b){this.Ha=a;this.aa=b}re.prototype.ab=g("Ha");re.prototype.da=g("aa");function se(a){var b=C();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function te(a,b){this.global=a;this.Na=a.b(lc);this.vd=b.map(function(a){return a.context});this.jf=b.map(function(a){return a.ke});this.Od=se(this.jf);this.ye=ue(this);this.fb=fb()}function ue(a){return a.vd.some(function(a){return!(a instanceof pe)})?1:0}m=te.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.ab().exec(b,h).then(function(b){c.push(b[0]);return a()})}return w()}var b=0==this.ye?void 0:new kd(this.global,this.Od),c=[],d=this.jf.slice(),e=this.vd;return a().then(function(){this.ja=this.Na.Hb(this.ye,D(this.Od),b);return this.ja.ka()}.bind(this)).then(function(){this.he(c);return c}.bind(this),function(a){null!=b&&b.Mb();throw a;})};m.I=g("ye");m.da=g("Od");m.Rb=g("fb");m.W=function(){return ka(this)};m.he=aa();
m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function ve(a,b){te.call(this,a,b);this.Lb=a.b(qc)}t(ve,te);ve.prototype.getPriority=l(0);ve.prototype.he=function(a){this.vd.forEach(function(b,c){we(this.Lb,b,a[c])},this)};function xe(a,b){this.c=a;this.Lb=a.b(qc);this.Ia=a.b(pc);this.kd=new Hc(a);this.ib=b;var c=a.b(rc),d=this.ib.map(function(a){return c.table(a.getName())});this.aa=C(d);this.fb=fb()}m=xe.prototype;m.exec=function(){this.kd.update(this.ib);this.Pc();return w()};m.I=l(1);m.da=g("aa");m.Rb=g("fb");m.W=function(){return ka(this)};m.getPriority=l(1);m.Pc=function(){var a=ye(this.Lb,this.aa);0!=a.length&&(a=new ve(this.c,a),ze(this.Ia,a))};function Ae(a){this.c=a;this.Na=a.b(lc);this.Ia=a.b(pc)}Ae.prototype.fe=function(a){a=new xe(this.c,a);ze(this.Ia,a)};function M(a,b){this.Ta=a;this.i=b;this.Ya=y()}r("lf.backstore.FirebaseRawBackStore",M);M.prototype.fd=g("i");M.prototype.gd=function(){throw new E(351);};function Be(a,b){var c=fb(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Ce(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=fb();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ea=function(a){return Be(this.i,"@rev/R").then(function(a){this.Ra=a;return Be(this.i,"@table")}.bind(this)).then(function(b){var c=0,d;for(d in b)this.Ya.set(d,b[d]),b[d]>c&&(c=b[d]);a.pa().forEach(function(a){this.Ya.has(a.getName())||(b[a.getName()]=++c)},this);d=this.i.child("@table");return Ce(d,b)}.bind(this))};
function De(a,b,c){var d=a.Ya.get(b);return null!=d?function(){var a={},b=fb();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Ra};return Ce(this.i,a)}.bind(a)):w()}M.prototype.wc=function(a){return De(this,a,l(null)).then(function(){this.Ya.delete(a);return Ce(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.wc;
M.prototype.tc=function(a,b,c){return De(this,a,function(a){var e=a.P;e[b]=c;return{R:this.Ra+1,T:a.T,P:e}}.bind(this))};M.prototype.addTableColumn=M.prototype.tc;M.prototype.xc=function(a,b){return De(this,a,function(a){var d=a.P;delete d[b];return{R:this.Ra+1,T:a.T,P:d}}.bind(this))};M.prototype.dropTableColumn=M.prototype.xc;M.prototype.Oc=function(a,b,c){return De(this,a,function(a){var e=a.P;e[c]=e[b];delete e[b];return{R:this.Ra+1,T:a.T,P:e}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Oc;
M.prototype.Ab=function(){throw new E(351);};M.prototype.createRow=M.prototype.Ab;M.prototype.Fc=g("Ta");M.prototype.getVersion=M.prototype.Fc;M.prototype.hc=function(a){var b=fb();a=this.Ya.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var d=[];a.forEach(function(a){d.push(a.val().P)});b.resolve(d)});return b.ha};M.prototype.dump=function(){var a={},b=Wb(this.Ya).map(function(b){return this.hc(b).then(function(d){a[b]=d})}.bind(this));return eb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Ee(a,b,c){cc.call(this,b,c);this.i=a}t(Ee,cc);Ee.prototype.H=function(a){return this.i.Dc(a)};
Ee.prototype.vc=function(){if(0==this.Ad)return this.S.resolve(),this.S.ha;var a=this.Qa.ib;if(0==a.size)this.S.resolve();else{var b=this.i.Ra+1;this.i.Ra=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var f=this.i.Ya.get(e);a.wa.forEach(function(a,d){c[d]={R:b,T:f,P:a.m}});a.ma.forEach(function(a,d){c[d]={R:b,T:f,P:a[1].m}});a.xa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.S.resolve():(this.i.Ra=b-1,c=z(a).map(function(a){return Fe(this.i,a.getName())},this),
eb(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha};function Ge(){this.Ba=y()}function He(a,b){if(0==b.length)return z(a.Ba);var c=[];b.forEach(function(a){a=this.Ba.get(a)||null;null===a||c.push(a)},a);return c}Ge.prototype.getData=g("Ba");Ge.prototype.get=function(a){return w(He(this,a))};function Ie(a,b){b.forEach(function(a){this.Ba.set(a.id(),a)},a)}Ge.prototype.put=function(a){Ie(this,a);return w()};function Je(a,b){0==b.length||b.length==a.Ba.size?a.Ba.clear():b.forEach(function(a){this.Ba.delete(a)},a)}
Ge.prototype.remove=function(a){Je(this,a);return w()};function Ke(a){return 0==a.Ba.size?0:Wb(a.Ba).reduce(function(a,c){return a>c?a:c},0)};function Le(a,b){this.g=a;this.Ff=b;this.Nc=y();this.Ra=-1;this.M=y();this.Ya=y();this.Ld=null}m=Le.prototype;
m.Ea=function(a){this.i=this.Ff.child(this.g.name());var b=a||function(){return w()};return Be(this.i,"@db/version").then(function(a){return null===a?Ce(this.i,Me(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Ea()}.bind(this)):a==this.g.version()?Be(this.i,"@rev/R").then(function(a){this.Ra=a;return Be(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Ya.set(b,a[b]);a=this.g.pa().map(function(a){return Fe(this,a.getName())},this);
return eb(a)}.bind(this)).then(function(){Ne(this);Oe(this);return w()}.bind(this)):this.ie(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.ie=function(a,b){var c=new M(a,this.i);return c.Ea(this.g).then(function(){return w()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Ce(a,{version:this.g.version()},!0)}.bind(this))};
function Oe(a){a.i.off();a.i.on("child_removed",a.Bg.bind(a));a.Md&&(a.Md.off(),a.Nc.clear());a.Md=a.i.orderByChild("R").startAt(a.Ra+1);a.Md.on("value",a.fe.bind(a))}function Ne(a){Yb=z(a.M).map(function(a){return Ke(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.Bg=function(a){var b=a.val(),c=this.Nc.get(b.T)||null;null===c&&(c=C(),this.Nc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.fe=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Ra&&(this.Ra=b,a=Pe(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),e=Wb(a.xa);0<e.length&&Je(b,e);var f=z(a.wa);a.ma.forEach(function(a){f.push(a[1])});Ie(b,f)},this),0<a.length&&this.Jc(a),Oe(this))};
function Pe(a,b){var c=C(),d=y();a.Ya.forEach(function(a,b){var h=this.M.get(b),k=new id(b);if(this.Nc.has(a)){var n=D(this.Nc.get(a));n.forEach(function(a){c.add(a)});He(h,n).forEach(function(a){k.delete(a)})}d.set(a,k)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var h=a.val();a=d.get(h.T);var k=this.M.get(a.getName()),h=this.g.table(a.getName()).mb({id:b,value:h.P});k.getData().has(b)?a.modify([He(k,[b])[0],h]):a.add(h)}}}.bind(a));return z(d).filter(function(a){return!a.md()})}
function Fe(a,b){var c=fb(),d=a.Ya.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ge,k=[];a.forEach(function(a){k.push(e.mb({id:parseInt(a.key(),10),value:a.val().P}))});Ie(d,k);this.M.set(b,d);c.resolve()}.bind(a));return c.ha}function Me(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Ra=1;b["@table"]={};a.g.pa().forEach(function(a,d){var e=a.getName();b["@table"][e]=d;this.M.set(e,new Ge);this.Ya.set(e,d)},a);return b}
m.Hb=function(a,b,c){return new Ee(this,a,c)};m.Dc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new E(101,a);};m.close=aa();m.subscribe=ba("Ld");m.Jc=function(a){null!=this.Ld&&this.Ld(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Ta=a;this.Xc=d}r("lf.backstore.IndexedDBRawBackStore",N);N.prototype.fd=g("i");N.prototype.getRawDBInstance=N.prototype.fd;N.prototype.gd=g("ja");N.prototype.getRawTransaction=N.prototype.gd;N.prototype.wc=function(a){return new v(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.wc;
function Qe(a,b,c,d){return new v(function(a,f){var h;try{var k=this.ja.objectStore(b);h=k.openCursor()}catch(n){f(n);return}h.onsuccess=function(){var b=h.result;b?(c(b),b.continue()):(d(k),a())};h.onerror=f},a)}function Re(a){var b=null;return b=a instanceof ArrayBuffer?ac(a):a instanceof Date?a.getTime():a}
function Se(a,b,c){function d(a){var b=Cc(a.value),d=b.m,e;for(e in d){var B=Zb(d[e]);c(B);d[e]=B.Ja()}a.update(b.Ja())}function e(a){var b=Zb(a.value);c(b);a.update(b.Ja())}return Qe(a,b,a.Xc?d:e,aa())}N.prototype.tc=function(a,b,c){var d=Re(c);return Se(this,a,function(a){a.m[b]=d})};N.prototype.addTableColumn=N.prototype.tc;N.prototype.xc=function(a,b){return Se(this,a,function(a){delete a.m[b]})};N.prototype.dropTableColumn=N.prototype.xc;
N.prototype.Oc=function(a,b,c){return Se(this,a,function(a){a.m[c]=a.m[b];delete a.m[b]})};N.prototype.renameTableColumn=N.prototype.Oc;function Te(a,b){var c=[];return new v(function(a,e){var f;try{f=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}f.onsuccess=function(){var b=f.result;if(b){if(this.Xc){var e;e=Cc(b.value).m;for(var n in e)c.push(e[n])}else c.push(b.value);b.continue()}else a(c)}.bind(this);f.onerror=e},a)}N.prototype.Ab=function(a){var b={},c;for(c in a)b[c]=Re(a[c]);return $b(b)};
N.prototype.createRow=N.prototype.Ab;N.prototype.Fc=g("Ta");N.prototype.getVersion=N.prototype.Fc;N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.hc(d))}return eb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.hc=function(a){return Te(this,a).then(function(a){return a.map(function(a){return a.value})})};function Ue(a,b){this.Z=a;this.Ib=b}Ue.prototype.get=function(a){if(0==a.length)return null!=this.Z.getAll?Ve(this):We(this);a=a.map(function(a){return new v(function(c,d){var e;try{e=this.Z.get(a)}catch(f){d(f);return}e.onerror=d;e.onsuccess=function(a){c(this.Ib(a.target.result))}.bind(this)},this)},this);return eb(a)};
function We(a){return new v(function(a,c){var d=[],e;try{e=this.Z.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(d.push(this.Ib(c.value)),c.continue()):a(d)}.bind(this)},a)}function Ve(a){return new v(function(a,c){var d;try{d=this.Z.getAll()}catch(e){c(e);return}d.onerror=c;d.onsuccess=function(){var c=d.result.map(function(a){return this.Ib(a)},this);a(c)}.bind(this)},a)}
Ue.prototype.Wb=function(a){return new v(function(b,c){var d;try{d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};Ue.prototype.put=function(a){if(0==a.length)return w();a=a.map(function(a){return this.Wb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return eb(a)};
Ue.prototype.remove=function(a){return new v(function(b,c){var d=this.Z.count();d.onsuccess=function(d){if(0==a.length||d.target.result==a.length)return this.Wb(function(){return this.Z.clear()}.bind(this)).then(b,c);d=a.map(function(a){return this.Wb(function(){return this.Z.delete(a)}.bind(this))},this);eb(d).then(b,c)}.bind(this);d.onerror=c},this)};function Xe(a,b,c,d,e){cc.call(this,c,e);this.c=a;this.ja=b;this.Xc=d;this.ja.oncomplete=this.S.resolve.bind(this.S);this.ja.onabort=this.S.reject.bind(this.S)}t(Xe,cc);Xe.prototype.H=function(a,b,c){return this.Xc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Dc(a,b,0==c?qa(Fc,this.c):Gc)):new Ue(this.ja.objectStore(a),b)};Xe.prototype.vc=function(){return this.S.ha};function Ye(a,b){this.c=a;this.g=b;this.Id=b.kf().Vf||!1}m=Ye.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new E(352);var c=a||function(){return w()};return new v(function(a,e){var f;try{f=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}f.onerror=function(a){a=a.target.error;e(new E(361,a.name,a.message))};f.onupgradeneeded=function(a){Ze(this,c,a).then(aa(),e)}.bind(this);f.onsuccess=function(b){this.i=b.target.result;this.re().then(function(b){Yb=b+1;a(this.i)}.bind(this))}.bind(this)},
this)};function Ze(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Id);$e(d);a.g.pa().forEach(qa(a.Of,d),a);return b(c)}function $e(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(c){}})}
m.Of=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Fb()&&(b.Da().forEach(function(b){af(a,b.j())},this),af(a,bf(b)))};function af(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Hb=function(a,b,c){b=this.i.transaction(cf(b),0==a?"readonly":"readwrite");return new Xe(this.c,b,a,this.Id,c)};
function cf(a){var b=C();a.forEach(function(a){b.add(a.getName());a.Fb()&&(a.Da().forEach(function(a){b.add(a.j())}),b.add(bf(a)))});return D(b)}
m.re=function(a){function b(){if(0==d.length)return w();var a=d.shift();return c(a).then(b)}function c(b){return new v(function(c,d){var O;try{O=(a||e.transaction([b])).objectStore(b).openCursor(null,"prev")}catch(ea){d(ea);return}O.onsuccess=function(a){(a=a.target.result)&&(f=Math.max(f,h(a)));c(f)};O.onerror=function(){c(f)}})}var d=this.g.pa().map(function(a){return a.getName()}),e=this.i,f=0,h=function(a){return this.Id?(a=Cc(a.value),Object.keys(a.m).reduce(function(a,b){return Math.max(a,b)},
0)):a.key}.bind(this);return new v(function(a){b().then(function(){a(f)})})};m.close=function(){this.i.close()};m.Dc=function(){throw new E(511);};m.subscribe=aa();m.Jc=aa();function df(a,b,c){cc.call(this,b,c);this.Z=a;0==b&&this.S.resolve()}t(df,cc);df.prototype.H=function(a){return this.Z.Dc(a)};df.prototype.vc=function(){this.S.resolve();return this.S.ha};function ef(a){this.g=a;this.M=y()}m=ef.prototype;m.Ea=function(){this.g.pa().forEach(this.ig,this);return w()};m.Dc=function(a){var b=this.M.get(a)||null;if(null===b)throw new E(101,a);return b};m.Hb=function(a,b,c){return new df(this,a,c)};function ff(a,b){if(!a.M.has(b)){var c=new Ge;a.M.set(b,c)}}m.ig=function(a){ff(this,a.getName());a.Fb()&&(a.Da().forEach(function(a){ff(this,a.j())},this),ff(this,bf(a)))};m.close=aa();m.subscribe=aa();m.Jc=aa();function gf(a){ef.call(this,a);this.sd=null}t(gf,ef);gf.prototype.subscribe=function(a){null===this.sd&&(this.sd=a)};gf.prototype.Jc=function(a){null===this.sd||this.sd(a)};function hf(a,b,c){this.ja=a;this.A='"'+b+'"';this.Ib=c}hf.prototype.get=function(a){var b=this.Ib;return jf(this.ja,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var d=a.rows.length,e=Array(d),f=0;f<d;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
hf.prototype.put=function(a){if(0==a.length)return w();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){jf(this.ja,b,[a.id(),JSON.stringify(a.m)])},this);return w()};hf.prototype.remove=function(a){jf(this.ja,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return w()};function kf(a,b,c){cc.call(this,b,c);this.i=a;this.M=y();this.Pd=[]}t(kf,cc);function mf(a){return a.replace(".","__d__").replace("#","__s__")}kf.prototype.H=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new hf(this,mf(a),b),this.M.set(a,c));return c};function jf(a,b,c,d){var e=fb();a.Pd.push({Pg:b,Fg:c,transform:d,S:e});return e.ha}
kf.prototype.vc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var k=h;null!=a.transform&&null!=h&&(k=a.transform(h));d.push(k);a.S.resolve(k)}0<this.Pd.length?(a=k=this.Pd.shift(),b.executeSql(k.Pg,k.Fg,e,c)):this.S.resolve(d)}.bind(this);0==this.Ad?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.S.ha};function P(a,b,c){this.i=c;this.c=a;this.Ta=b}r("lf.backstore.WebSqlRawBackStore",P);P.prototype.fd=g("i");P.prototype.getRawDBInstance=P.prototype.fd;P.prototype.gd=function(){throw new E(356);};P.prototype.getRawTransaction=P.prototype.gd;function nf(a){return new kf(a.i,1,new kd(a.c,C()))}P.prototype.wc=function(a){var b=nf(this);jf(b,"DROP TABLE "+a,[]);return b.ka()};P.prototype.dropTable=P.prototype.wc;
P.prototype.hc=function(a){var b=nf(this);jf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,e=Array(b),f=0;f<b;++f)e[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return w(e)})};function of(a,b,c){var d=nf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.hc(b).then(function(a){a.forEach(function(a){a=c(a);jf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
P.prototype.tc=function(a,b,c){var d=Re(c);return of(this,a,function(a){a.value[b]=d;return a})};P.prototype.addTableColumn=P.prototype.tc;P.prototype.xc=function(a,b){return of(this,a,function(a){delete a.value[b];return a})};P.prototype.dropTableColumn=P.prototype.xc;P.prototype.Oc=function(a,b,c){return of(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};P.prototype.renameTableColumn=P.prototype.Oc;P.prototype.Ab=function(a){var b={},c;for(c in a)b[c]=Re(a[c]);return $b(b)};
P.prototype.createRow=P.prototype.Ab;P.prototype.Fc=g("Ta");P.prototype.getVersion=P.prototype.Fc;function pf(a){jf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var c=Array(a.rows.length),d=0;d<c.length;++d)c[d]=a.rows.item(d).tbl_name;return c})}
P.prototype.dump=function(){var a=fb(),b=nf(this);pf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.hc(a).then(function(b){c[a]=b})},this);eb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};P.prototype.dump=P.prototype.dump;function qf(a,b,c){this.c=a;this.g=b;this.Og=c||1}m=qf.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new E(353);var b=a||function(){return w()};return new v(function(a,d){var e=window.openDatabase(this.g.name(),"",this.g.name(),this.Og);if(null!=e)this.i=e,rf(this,b).then(function(){this.re().then(a,d)}.bind(this),function(a){if(a instanceof E)throw a;throw new E(354,a.message);});else throw new E(354);},this)};
function rf(a,b){var c=fb(),d=new kf(a.i,1,new kd(a.c,C()));jf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);jf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ie(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new E(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Hb=function(a,b,c){if(null!=this.i)return new kf(this.i,a,c);throw new E(2);};m.close=aa();
m.Dc=function(){throw new E(512);};m.subscribe=function(){throw new E(355);};m.Jc=function(){throw new E(355);};m.ie=function(a,b){return sf(this).then(function(){return a(new P(this.c,b,this.i))}.bind(this))};
function sf(a){var b=a.g.pa(),c=new kf(a.i,1,new kd(a.c,C())),d=new kf(a.i,1,new kd(a.c,C()));jf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);pf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){jf(d,"DROP TABLE "+('"'+a+'"'),[])});var h=[],k=[],n=[];b.map(function(a){-1==c.indexOf(a.getName())&&h.push(a.getName());a.Fb&&(a.Da().forEach(function(a){a=mf(a.j());h.push(a);k.push(a)}),a=mf(bf(a)),h.push(a),n.push(a))});
h.forEach(function(a){jf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.re=function(){var a=0,b=fb(),c=function(b){var c=new kf(this.i,0);jf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.pa().map(function(a){return c(a.getName())});eb(d).then(function(){Yb=a+1;b.resolve()},function(a){b.reject(a)});return b.ha};function tf(a){this.l=y();this.cc=y();a.pa().forEach(function(a){this.cc.set(a.getName(),C())},this)}m=tf.prototype;m.set=function(a,b){this.l.set(b.id(),b);this.cc.get(a).add(b.id())};m.Zb=function(a,b){var c=this.cc.get(a);b.forEach(function(a){this.l.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.l.get(a)||null};function uf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Ua=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.cc.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.l.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.l.get(b),d.push(c));return d};m.remove=function(a,b){this.l.delete(b);this.cc.get(a).delete(b)};m.Cc=function(a){return null!=a?this.cc.get(a).size:this.l.size};m.clear=function(){this.l.clear();this.cc.clear()};function vf(a,b,c){var d=0,e=a.length;for(c=c||wf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function wf(a,b){return a-b}function xf(a,b,c){c=vf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function yf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(q(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function zf(){this.ia=0;this.Ic=null}zf.prototype.add=function(a,b){this.ia+=b;this.Ic=null===this.Ic?a:a>this.Ic?a:this.Ic};zf.prototype.remove=function(a,b){this.ia-=b};zf.prototype.clear=function(){this.ia=0};function Af(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Bf(a,b,c,d){this.A=a;this.$=b;this.Af=c;this.za=new zf;if(d){a=511;a*=a*a;if(d.length>=a)throw new E(6,a);d=Cf(this,d);this.ua=d=Df(d)}else this.clear()}var Ef=[];m=Bf.prototype;m.getName=g("A");m.toString=function(){return this.ua.toString()};m.add=function(a,b){this.ua=this.ua.Db(a,b)};m.set=function(a,b){this.ua=this.ua.Db(a,b,!0)};m.remove=function(a,b){this.ua=this.ua.remove(a,b)};m.get=function(a){return this.ua.get(a)};
m.ad=function(a){if(null==a)return this.Y().ia;if(a instanceof F){if(qd(a))return this.Y().ia;if(ud(a))return this.get(a.from).length}return this.Ua([a]).length};m.Y=g("za");m.Wd=function(a,b,c,d){c=Array(a);this.ua.fill({offset:b?this.za.ia-a-d:d,count:a,ue:0},c);return b?c.reverse():c};
m.Ua=function(a,b,c,d){var e=Ff(this.ua).a[0];if(!q(e)||0==c)return Ef;b=b||!1;c=null!=c?Math.min(c,this.za.ia):this.za.ia;d=d||0;var f=Math.min(Math.max(this.za.ia-d,0),c);if(0==f)return Ef;if(!q(a)||1==a.length&&a[0]instanceof F&&qd(a[0]))return this.Wd(f,b,c,d);a=this.$.wf(a);var h=Array(b?this.za.ia:f),k={count:0,X:h.length,reverse:b,L:d},n=1<this.lb().ae();a.forEach(function(a){for(var b=this.$.wd(a),b=this.$.Zd(a)?e:b[0],b=this.ua.bg(b),c=0;null!=b&&k.count<k.X;){if(n){for(var d=b,f=a,fc=k,
Db=h,Uc=d.u.lb(),ne=-1,Ma=0;Ma<d.a.length;++Ma)if(Uc.Eb(d.a[Ma],f)){ne=Ma;break}if(-1!=ne)for(Ma=ne;Ma<d.a.length&&fc.count<fc.X;++Ma)Uc.Eb(d.a[Ma],f)&&Gf(d,fc,Db,Ma)}else b.Ua(a,k,h);0!=k.L||b.nd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>k.count&&h.splice(k.count,h.length-k.count);return b?yf(h,b,c,d):h};m.clear=function(){this.ua=Hf(this);this.za.clear()};m.Oa=function(a){return this.ua.Oa(a)};m.min=function(){return this.Kb(this.$.min.bind(this.$))};m.max=function(){return this.Kb(this.$.max.bind(this.$))};
function If(a,b,c){if(!a.$.Qd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.Af?[b.B[c]]:b.B[c]]}m.Kb=function(a){var b;a:{b=Ff(this.ua);var c=0;do if(c>=b.a.length)b=b.ya,c=0;else{var d=If(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Jf(this.ua);d=c.a.length-1;do if(0>d)c=c.tb,d=0;else{var e=If(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.La=g("Af");m.lb=g("$");
m.Pa=function(a,b){return null!=a?0==this.$.compare(a,b):!1};m.Ja=function(){for(var a=[],b=Ff(this.ua);b;)a.push(new Xb(b.sa,[b.a,b.B])),b=b.ya;return a};function Kf(a,b,c,d){a=new Bf(b,a,c);d=Lf(d,a);a.ua=d;return a}function Mf(a,b){this.sa=a;this.u=b;this.ob=0;this.ya=this.tb=this.F=null;this.a=[];this.B=[];this.h=[];this.bg=1==b.lb().ae()?this.Pe:this.Oe}function Hf(a){return new Mf(Yb++,a)}function Q(a){return 0==a.ob}m=Mf.prototype;m.next=g("ya");
function Nf(a){function b(a){return null!=a?a.sa.toString():"_"}var c=a.sa+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.sa}).join("|"),e=a.B.join("/"),f=b(a.tb)+"{",f=Q(a)?f+e:f+d,f=f+"}"+b(a.F);a.ya&&(a=Nf(a.ya),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Nf(this),a=a+(b[0]+"\n"+b[1]+"\n");this.h.length&&(a+=this.h[0].toString());return a};function Ff(a){return Q(a)?a:Ff(a.h[0])}function Jf(a){return Q(a)?a:Jf(a.h[a.h.length-1])}
function Of(a,b){b&&(b.tb=a);a&&(a.ya=b)}function Cf(a,b){for(var c=b.length,d=0,e=Hf(a),f=e;0<c;){var h=768<=c?511:257<=c&&511>=c?c:257,k=b.slice(d,d+h);e.a=k.map(function(a){return a.key});e.B=k.map(function(a){return a.value});d+=h;c-=h;0<c&&(h=Hf(e.u),Of(e,h),e=h)}return f}function Pf(a){var b=a[0],c=Hf(b.u);c.ob=b.ob+1;c.h=a;for(b=0;b<a.length;++b)a[b].F=c,0<b&&c.a.push(a[b].a[0]);return c}
function Df(a){var b=a,c=[];do c.push(b),b=b.ya;while(b);if(512>=c.length)b=Pf(c);else{var d=c.length,e=0,b=Hf(a.u);for(b.ob=a.ob+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Pf(f);h.F=b;b.h.length&&(b.a.push(f[0].a[0]),Of(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}m.get=function(a){var b=Qf(this,a);if(Q(this)){var c=Ef;this.u.Pa(this.a[b],a)&&(c=c.concat(this.B[b]));return c}b=this.u.Pa(this.a[b],a)?b+1:b;return this.h[b].get(a)};
m.Oa=function(a){var b=Qf(this,a);return this.u.Pa(this.a[b],a)?!0:Q(this)?!1:this.h[b].Oa(a)};m.remove=function(a,b){Rf(this,a,-1,b);if(null===this.F){var c=this;1==this.h.length&&(c=this.h[0],c.F=null);return c}return this};function Sf(a){return Q(a)?a.a[0]:Sf(a.h[0])}function Tf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Sf(a.h[b]))}
function Rf(a,b,c,d){var e=Qf(a,b),f=Q(a);if(!f){var h=a.u.Pa(a.a[e],b)?e+1:e;if(Rf(a.h[h],b,h,d))Tf(a);else return!1}else if(!a.u.Pa(a.a[e],b))return!1;if(a.a.length>e&&a.u.Pa(a.a[e],b)){if(q(d)&&!a.u.La()&&f&&(h=a.B[e],d=vf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.u.Y().remove(b,1),a.B[e].length))return!1;a.a.splice(e,1);f&&(f=a.u.La()?1:a.B[e].length,a.B.splice(e,1),a.u.Y().remove(b,f))}if(256>a.a.length&&null!==a.F){a:{b=null;if(a.ya&&256<a.ya.a.length)b=a.ya,e=d=0,f=a.a.length+1;else if(a.tb&&
256<a.tb.a.length)b=a.tb,d=a.tb.a.length-1,e=Q(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=Q(a)?a.B:a.h;h=null;Q(a)?h=b.B:(h=b.h,h[e].F=a);d.splice(f,0,h[e]);h.splice(e,1);Q(b)||(Tf(b),Tf(a));b=!0}b||Uf(a,c)}return!0}
function Uf(a,b){var c,d,e;a.ya&&511>a.ya.a.length?(c=a.ya,e=d=0):a.tb&&(c=a.tb,d=c.a.length,e=Q(c)?c.B.length:c.h.length);d=[d,0].concat(a.a);Array.prototype.splice.apply(c.a,d);d=null;Q(a)?d=a.B:(d=a.h,d.forEach(function(a){a.F=c}));d=[e,0].concat(d);Array.prototype.splice.apply(Q(c)?c.B:c.h,d);Of(a.tb,a.ya);Q(c)||Tf(c);-1!=b&&(a.F.a.splice(b,1),a.F.h.splice(b,1))}
m.Db=function(a,b,c){var d=Qf(this,a);if(Q(this)){if(this.u.Pa(this.a[d],a)){if(c)this.u.Y().remove(a,this.u.La()?1:this.B[d].length),this.B[d]=this.u.La()?b:[b];else{if(this.u.La())throw new E(201);if(!xf(this.B[d],b))throw new E(109);}this.u.Y().add(a,1);return this}this.a.splice(d,0,a);this.B.splice(d,0,this.u.La()?b:[b]);this.u.Y().add(a,1);512==this.a.length?(d=Hf(this.u),a=Hf(this.u),a.ob=1,a.a=[this.a[256]],a.h=[this,d],a.F=this.F,this.F=a,d.a=this.a.splice(256),d.B=this.B.splice(256),d.F=
a,Of(d,this.ya),Of(this,d),d=a):d=this;return d}d=this.u.Pa(this.a[d],a)?d+1:d;a=this.h[d].Db(a,b,c);Q(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].F=this,a.h[0].F=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Vf(this):this};function Vf(a){var b=Hf(a.u),c=Hf(a.u);b.F=a.F;b.ob=a.ob+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.F=b;c.ob=a.ob;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.F=c});a.F=b;Of(c,a.ya);Of(a,c);return b}
function Qf(a,b){for(var c=0,d=a.a.length,e=a.u.lb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Pe=function(a){if(!Q(this)){var b=Qf(this,a);this.u.Pa(this.a[b],a)&&b++;return this.h[b].Pe(a)}return this};m.Oe=function(a){if(!Q(this)){var b=Qf(this,a);this.u.Pa(this.a[b],a)&&(a.some(function(a){return a==G})||b++);return this.h[b].Oe(a)}return this};
m.Ua=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.u.lb(),f=0,h=this.a.length-1,k=this.a,n=d(e.zb(k[f],a)),B=d(e.zb(k[h],a));if(1!=n&&(-1!=n||-1!=B)){var O=function(a,b){var c=a+b>>1;return c==a?c+1:c},ea=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.zb(k[b],a));if(0==h)return b;if(1==h)return-1;h=O(b,c);if(h==c)return 0==f?c:-1;var n=d(e.zb(k[h],a));return 0==n?ea(b,h,n):-1==n?ea(h+1,c,f):ea(b+1,h,n)},Cb=function(b,c){if(b>=c)return b;var f=d(e.zb(k[c],a));if(0==f)return c;
if(-1==f)return b;f=O(b,c);if(f==c)return b;var h=d(e.zb(k[f],a));return 0==h?Cb(f,c):1==h?Cb(b,f-1):-1};0!=n&&(f=ea(f+1,h,B));-1!=f&&(h=Cb(f,h),-1!=h&&h>=f&&Wf(this,b,c,f,h+1))}};function Gf(a,b,c,d){if(a.u.La())!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d];else for(var e=0;e<a.B[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.B[d][e]}function Wf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Gf(a,b,c,d)}
m.fill=function(a,b){if(Q(this))for(var c=0;c<this.B.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.u.La()?1:this.B[c].length,0>a.offset)for(var d=this.B[c].length+a.offset;d<this.B[c].length&&0<a.count;++d)b[a.ue++]=this.B[c][d],a.count--}else if(this.u.La())b[a.ue++]=this.B[c],a.count--;else for(d=0;d<this.B[c].length&&0<a.count;++d)b[a.ue++]=this.B[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Lf(a,b){for(var c=b.Y(),d=a.map(function(a){var d=new Mf(a.id(),b);d.a=a.m[0];d.B=a.m[1];d.a.forEach(function(a,e){c.add(a,b.La()?1:d.B[e].length)});return d}),e=0;e<d.length-1;++e)Of(d[e],d[e+1]);return 1<d.length?Df(d[0]):d[0]}m.nd=function(a){return this.u.lb().nd(this.a[0],a)};function Xf(a){this.$c=0==a?Yf:Zf;this.de=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.je=0==a?$f:ag}function Zf(a,b){return a>b?1:a<b?-1:0}function Yf(a,b){return Zf(b,a)}function ag(a,b){return vd(a,b)}function $f(a,b){return vd(b,a)}m=Xf.prototype;m.zb=function(a,b){var c=this.de(b),d=[c.from==G,c.o==G];if(!d[0]){var e=this.$c(a,c.from);d[0]=c.ea?1==e:-1!=e}d[1]||(e=this.$c(a,c.o),d[1]=c.oa?-1==e:1!=e);return d};m.compare=function(a,b){return this.$c(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Eb=function(a,b){var c=this.zb(a,b);return c[0]&&c[1]};m.nd=function(a,b){return this.Eb(a,b)};m.wf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.je(a,c)}.bind(this))};m.Zd=function(a){return this.de(a).from==G};m.wd=function(a){a=this.de(a);return[a.from,a.o]};m.Qd=function(a){return null!==a};m.ae=l(1);
m.toString=function(){return this.compare==Yf?"SimpleComparator_DESC":"SimpleComparator_ASC"};function cg(a){Xf.call(this,a);this.$c=0==a?dg:eg}t(cg,Xf);function eg(a,b){return null===a?null===b?0:-1:null===b?1:Zf(a,b)}function dg(a,b){return eg(b,a)}cg.prototype.Eb=function(a,b){return null===a?qd(b):cg.hb.Eb.call(this,a,b)};cg.prototype.Kb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};cg.prototype.min=function(a,b){var c=this.Kb(a,b);null===c&&(c=cg.hb.min.call(this,a,b));return c};
cg.prototype.max=function(a,b){var c=this.Kb(a,b);null===c&&(c=cg.hb.max.call(this,a,b));return c};function fg(a){this.qa=a.map(function(a){return new Xf(a)})}function gg(a,b,c,d){for(var e=0,f=0;f<a.qa.length&&0==e;++f)e=d(a.qa[f],b[f],c[f]);return e}m=fg.prototype;m.compare=function(a,b){return gg(this,a,b,function(a,b,e){return b==G||e==G?0:a.compare(b,e)})};m.min=function(a,b){return gg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return gg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.zb=function(a,b){for(var c=[!0,!0],d=0;d<this.qa.length&&(c[0]||c[1]);++d){var e=this.qa[d].zb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Eb=function(a,b){for(var c=!0,d=0;d<this.qa.length&&c;++d)c=this.qa[d].Eb(a[d],b[d]);return c};m.nd=function(a,b){return this.qa[0].Eb(a[0],b[0])};
m.wf=function(a){var b=a.filter(function(a){return a.every(ga)});a=Array(this.qa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.qa[b].je(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,h=0;h<this.qa.length&&0==c;++h)c=this.qa[h].je(a[h],b[h]);return c}.bind(this))};m.Zd=function(a){return this.qa[0].Zd(a[0])};
m.wd=function(a){var b=a.map(function(a,b){return this.qa[b].wd(a)[0]},this);a=a.map(function(a,b){return this.qa[b].wd(a)[1]},this);return[b,a]};m.Qd=function(a){return a.every(function(a,c){return this.qa[c].Qd(a)},this)};m.ae=function(){return this.qa.length};function hg(a){fg.call(this,a);this.qa=a.map(function(a){return new cg(a)})}t(hg,fg);function ig(a){if(1==a.f.length)return new Xf(a.f[0].sb);var b=a.f.map(function(a){return a.sb});return a.f.some(function(a){return a.ba.kc()})?new hg(b):new fg(b)};function jg(a){this.fa=a;this.qb=C();this.Rc=new zf;this.za=new zf}m=jg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.qb.add(b),this.Rc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.qb.clear(),this.Rc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.qb.delete(b),this.Rc.remove(a,1)):(this.qb.clear(),this.Rc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?D(this.qb):this.fa.get(a)};m.ad=function(a){return this.fa.ad(a)};
m.Y=function(){Af(this.za,[this.fa.Y(),this.Rc]);return this.za};m.Ua=function(a,b,c,d){b=this.fa.Ua(a,b,c,d);return null!=a?b:b.concat(D(this.qb))};m.clear=function(){this.qb.clear();this.fa.clear()};m.Oa=function(a){return null===a?0!=this.qb.size:this.fa.Oa(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new Xb(-2,D(this.qb))].concat(this.fa.Ja())};m.lb=function(){return this.fa.lb()};
function kg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new E(102);var d=b[c].m,e=b.slice(0);e.splice(c,1);var c=a(e),f=new jg(c);d.forEach(function(a){f.qb.add(a)});return f}m.La=function(){return this.fa.La()};function lg(a){this.A=a;this.vb=C();this.$=new Xf(1)}m=lg.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new E(103);this.vb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.vb.delete(a)};m.get=function(a){return this.Oa(a)?[a]:[]};m.min=function(){return this.Kb(this.$.min.bind(this.$))};m.max=function(){return this.Kb(this.$.max.bind(this.$))};
m.Kb=function(a){if(0==this.vb.size)return null;var b=D(this.vb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.ad=function(){return this.vb.size};m.Ua=function(a,b,c,d){var e=a||[td()];a=D(this.vb).filter(function(a){return e.some(function(b){return this.$.Eb(a,b)},this)},this);return yf(a,b,c,d)};m.clear=function(){this.vb.clear()};m.Oa=function(a){return this.vb.has(a)};m.Ja=function(){return[new Xb(0,D(this.vb))]};m.lb=g("$");
function mg(a,b){var c=new lg(a);b[0].m.forEach(function(a){c.add(a,a)});return c}m.La=l(!0);m.Y=function(){var a=new zf;a.ia=this.vb.size;return a};function ng(a){this.Na=a.b(lc);this.D=a.b(nc);this.V=a.b(mc)}ng.prototype.Ea=function(a){var b=a.pa(),c=function(){if(0==b.length)return w();var a=b.shift();return(a.Fb()?og(this,a):pg(this,a)).then(c)}.bind(this);return c()};function pg(a,b){var c=a.Na.Hb(0,[b]),d=c.H(b.getName(),b.mb.bind(b),0).get([]).then(function(a){this.V.Zb(b.getName(),a);qg(this,b,a)}.bind(a));c.ka();return d}
function qg(a,b,c){var d=a.D.oc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.pb(b.getName());b.add(c,a.id())})})}function og(a,b){var c=a.Na.Hb(0,[b]),d=c.H(b.getName(),b.mb,0).get([]).then(function(a){this.V.Zb(b.getName(),a)}.bind(a)),e=b.Da().map(function(a){return rg(this,a,c)},a).concat(sg(a,b,c));c.ka();return eb(e.concat(d))}
function rg(a,b,c){c=c.H(b.j(),Zb,1);var d=ig(b);return c.get([]).then(function(a){if(0<a.length){if(tg(b)){var c=Kf.bind(void 0,d,b.j(),b.Gc);a=kg(c,a)}else a=Kf(d,b.j(),b.Gc,a);this.D.set(b.pc,a)}}.bind(a))}function sg(a,b,c){return c.H(bf(b),Zb,1).get([]).then(function(a){0<a.length&&(a=mg(bf(b),a),this.D.set(b.getName(),a))}.bind(a))};function ug(){this.Z=y();this.oc=y()}ug.prototype.Ea=function(a){a.pa().forEach(function(a){var c=[];this.oc.set(a.getName(),c);var d=bf(a);if(null===this.get(d)){var e=new lg(d);c.push(e);this.Z.set(d,e)}a.Da().forEach(function(a){var b;b=ig(a);b=new Bf(a.j(),b,a.Gc);b=tg(a)&&1==a.f.length?new jg(b):b;c.push(b);this.Z.set(a.j(),b)},this)},this);return w()};ug.prototype.get=function(a){return this.Z.get(a)||null};
ug.prototype.set=function(a,b){var c=this.oc.get(a)||null;null===c&&(c=[],this.oc.set(a,c));for(var d=null,e=0;e<c.length;e++)if(c[e].getName()==b.getName()){d=e;break}null!==d&&0<c.length?c.splice(d,1,b):c.push(b);this.Z.set(b.getName(),b)};function vg(a,b){var c=[],d=null,e=null;ce(a,function(a){var h=b(a);null==a.getParent()?e=h:L(d,h);var k=a.getParent();null!==k&&K(k).length==K(d).length&&(k=c.indexOf(d),-1!=k&&c.splice(k,1));1<K(a).length&&c.push(h);d=null===a.h?c[c.length-1]:h});return e}function wg(a){return xg(a,function(a){return null===a.h})}
function yg(a){var b=a.getParent(),c=0;null!==b&&(c=K(b).indexOf(a),b.removeChild(a));var d=K(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||$d(b,d,c+f)});return{parent:b,children:d}}function zg(a,b){K(a).slice().forEach(function(c){a.removeChild(c);L(b,c)});L(a,b)}function Ag(a){var b=Zd(a,0);yg(a);zg(b,a);return b}
function Bg(a,b,c){var d=Zd(a,0),e=K(d).slice();if(!e.some(function(a){return b(a)}))return a;yg(a);e.forEach(function(e,h){if(b(e)){var k=c(a);ae(d,h);L(k,e);$d(d,k,h)}});return d}function Cg(a,b,c,d){var e=a.getParent();null!==e&&(a=K(e).indexOf(a),ae(e,a),$d(e,c,a));K(b).slice().forEach(function(a){b.removeChild(a);L(d,a)});return c}function xg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||K(a).forEach(d)}var e=[];d(a);return e}
function Dg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";ce(a,function(a){for(var b=0;b<Yd(a);b++)d+="-";d+=c(a)});return d};function Eg(a){de.call(this);this.rb=a;this.Va=!1}t(Eg,de);m=Eg.prototype;m.Pb=function(){return vg(this,function(a){if(a instanceof Eg){var b=new Eg(a.rb);b.Va=a.Va;a=a.W();b.sa=a;return b}return a.Pb()})};m.nb=function(a){var b=a||[];ce(this,function(a){a!=this&&a.nb(b)}.bind(this));a=C(b);return D(a)};m.s=function(a){var b=null!=a?a:C();ce(this,function(a){a!=this&&a.s(b)}.bind(this));return b};m.xd=function(a){this.Va!=a&&(this.Va=a,this.rb="and"==this.rb?"or":"and",K(this).forEach(function(b){return b.xd(a)}))};
m.eval=function(a){var b=K(this).map(function(b){return b.eval(a)});return Fg(this,b)};function Fg(a,b){return"and"==a.rb?Ed(b):Fd(b)}m.toString=function(){return"combined_pred_"+this.rb.toString()};m.xe=function(){if("or"==this.rb){var a=new xd;K(this).forEach(function(b){b=b.xe().ra();a.add(b)});return a}return new xd};m.od=function(){return"or"==this.rb?Gg(this):!1};
function Gg(a){var b=null;return K(a).every(function(a){if(!(a instanceof fe&&a.od()))return!1;null===b&&(b=a.J);return b.j()==a.J.j()})};function Hg(a,b,c){de.call(this);this.ga=a;this.na=b;this.C=c;this.ee=null;a=Vd();this.yc=Wd(a,this.ga.I(),this.C);this.pg=a.Ze.get(this.ga.I())||null}t(Hg,de);m=Hg.prototype;m.Pb=function(){var a=new Hg(this.ga,this.na,this.C),b=this.W();a.sa=b;return a};m.nb=function(a){return null!=a?(a.push(this.ga),a.push(this.na),a):[this.ga,this.na]};m.s=function(a){a=null!=a?a:C();a.add(this.ga.H());a.add(this.na.H());return a};
m.reverse=function(){var a=this.C;switch(this.C){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Hg(this.na,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=I(a,this.ga);a=I(a,this.na);return this.yc(b,a)},this);return new H(b,a.s())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.C+" "+this.na.j()+")"};
function Ig(a,b,c){var d=null,e=null;-1!=b.s().indexOf(Jd(a.ga.H()))?(d=b,e=c):(d=c,e=b);if(d.entries.length>e.entries.length){a:{b=a.ga;a.ga=a.na;a.na=b;b=a.C;switch(a.C){case "gt":b="lt";break;case "lt":b="gt";break;case "gte":b="lte";break;case "lte":b="gte";break;default:break a}a.C=b;a.yc=Wd(Vd(),a.ga.I(),a.C)}return[e,d]}return[d,e]}function Jg(a){var b={};a.nb().forEach(function(a){b[a.getName()]=null});return b}
function Kg(a,b,c){null===a.ee&&(a.ee=Jg(a.na.H()));var d=new Hd(new Xb(-1,a.ee),!1);return Ld(b,c,d,[Jd(a.na.H())])}
function Lg(a,b,c,d){var e=[b,c];d||(e=Ig(a,b,c));b=e[0];c=e[1];var e=b,f=c,h=a.ga,k=a.na;d&&(e=c,f=b,h=a.na,k=a.ga);var n=new Sc,B=[];e.entries.forEach(function(a){var b=String(I(a,h));n.set(b,a)});var O=e.s(),ea=f.s();f.entries.forEach(function(a){var b=I(a,k),c=String(b);null!==b&&n.has(c)?n.get(c).forEach(function(b){b=Ld(a,ea,b,O);B.push(b)}):d&&B.push(Kg(this,a,ea))}.bind(a));a=b.s().concat(c.s());return new H(B,a)}
function Mg(a,b,c,d,e){function f(a,b){var c=new Hd(b,1<O.length),c=Ld(a,ea,c,O);B.push(c)}var h=d.fg.H(),k=b,n=c;-1!=b.s().indexOf(Jd(h))&&(k=c,n=b);var B=[],O=n.s(),ea=k.s();k.entries.forEach(function(a){var b=this.pg(I(a,d.yg)),b=d.index.get(b);0!=b.length&&(d.index.La()?f(a,e.get(b[0])):uf(e,b).forEach(f.bind(null,a)))},a);a=k.s().concat(n.s());return new H(B,a)};function Ng(a,b,c){return null===b?new fe(a,b,c):q(b.j)?new Hg(a,b,c):new fe(a,b,c)};var Og={};r("lf.schema.DataStoreType",Og);Og.INDEXED_DB=0;Og.MEMORY=1;Og.LOCAL_STORAGE=2;Og.FIREBASE=3;Og.WEB_SQL=4;Og.OBSERVABLE_STORE=5;function Pg(a,b,c,d){this.pc=a;this.name=b;this.Gc=c;this.f=d}Pg.prototype.j=function(){return this.pc+"."+this.name};function tg(a){return a.f.some(function(a){return a.ba.kc()})}function R(a,b,c,d){this.A=a;this.ta=c;this.K=b;this.ud=d;this.jb=null}r("lf.schema.Table",R);R.prototype.getName=g("A");R.prototype.getName=R.prototype.getName;R.prototype.$a=g("jb");
function Jd(a){return a.jb||a.A}R.prototype.uc=function(a){var b=new this.constructor(this.A);b.jb=a;b.Kg=this.Kg;return b};R.prototype.as=R.prototype.uc;R.prototype.createRow=R.prototype.Ab;R.prototype.deserializeRow=R.prototype.mb;R.prototype.Da=g("ta");R.prototype.getIndices=R.prototype.Da;R.prototype.nb=g("K");R.prototype.getColumns=R.prototype.nb;R.prototype.getConstraint=R.prototype.Jb;R.prototype.Fb=g("ud");R.prototype.persistentIndex=R.prototype.Fb;function bf(a){return a.A+".#"};function S(a,b){this.child=a;this.Ob=b;this.jb=null}m=S.prototype;m.getName=function(){return this.Ob+"("+this.child.getName()+")"};m.j=function(){return this.Ob+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.I=function(){return this.child.I()};m.$a=g("jb");m.Da=function(){return[]};m.Ca=l(null);m.kc=l(!1);m.uc=function(a){this.jb=a;return this};S.prototype.as=S.prototype.uc;
function Qg(a){for(var b=[a];a instanceof S;)b.push(a.child),a=a.child;return b}function Rg(a){this.jb=a||null;this.U=new R("#UnknownTable",[],[],!1)}m=Rg.prototype;m.getName=l("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("U");m.I=l(4);m.$a=g("jb");m.Da=function(){return[]};m.Ca=l(null);m.kc=l(!1);r("lf.fn.avg",function(a){return new S(a,"AVG")});function Sg(a){return new S(a||new Rg,"COUNT")}r("lf.fn.count",Sg);function Tg(a){return new S(a,"DISTINCT")}r("lf.fn.distinct",Tg);r("lf.fn.max",function(a){return new S(a,"MAX")});r("lf.fn.min",function(a){return new S(a,"MIN")});r("lf.fn.stddev",function(a){return new S(a,"STDDEV")});r("lf.fn.sum",function(a){return new S(a,"SUM")});r("lf.fn.geomean",function(a){return new S(a,"GEOMEAN")});function T(a,b){J.call(this);this.Xf=b}t(T,J);T.prototype.exec=function(a,b){switch(this.Xf){case 1:return Ug(this,a,b);case 0:return Vg(this,a,b);default:return Wg(this,a,b)}};T.prototype.toString=l("dummy_node");T.prototype.Sc=function(){return this.toString()};function Wg(a,b,c){return new v(function(a){a(this.ca([],b,c))}.bind(a))}function Ug(a,b,c){return Zd(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Vg(a,b,c){var d=K(a).map(function(a){return a.exec(b,c)});return eb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function Xg(a){T.call(this,0,1);this.De=a}t(Xg,T);Xg.prototype.toString=function(){return"aggregation("+this.De.map(function(a){return a.j()}).toString()+")"};Xg.prototype.ca=function(a){a.forEach(function(a){Yg(new Zg(a,this.De))},this);return a};function Zg(a,b){this.Ma=a;this.K=b}
function Yg(a){a.K.forEach(function(a){a=Qg(a).reverse();for(var c=1;c<a.length;c++){var d=a[c],e=Qg(d).slice(-1)[0],f=d.child instanceof S?Bd(this.Ma,d.child):this.Ma;if(null!==f.Za&&f.Za.has(d.j()))break;f=$g(d.Ob,f,e);e=this.Ma;null===e.Za&&(e.Za=y());e.Za.set(d.j(),f)}},a)}
function $g(a,b,c){var d=null;switch(a){case "MIN":d=ah(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=ah(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=bh(b,c);break;case "COUNT":d=ch(b,c);break;case "SUM":d=dh(b,c);break;case "AVG":a=ch(b,c);0<a&&(d=dh(b,c)/a);break;case "GEOMEAN":d=eh(b,c);break;default:d=fh(b,c)}return d}function ah(a,b,c){return a.entries.reduce(function(a,e){var f=I(e,b);return null===f?a:null===a?f:c(a,f)},null)}
function ch(a,b){return b instanceof Rg?a.entries.length:a.entries.reduce(function(a,d){return a+(fa(I(d,b))?0:1)},0)}function dh(a,b){return ah(a,b,function(a,b){return b+a})}function fh(a,b){var c=[];a.entries.forEach(function(a){a=I(a,b);null===a||c.push(a)});return 0==c.length?null:ub.apply(null,c)}function eh(a,b){var c=0,d=a.entries.reduce(function(a,d){var h=I(d,b);if(0==h||null===h)return a;c++;return a+Math.log(h)},0);return 0==c?null:Math.pow(Math.E,d/c)}
function bh(a,b){var c=y();a.entries.forEach(function(a){var e=I(a,b);c.set(e,a)});return new H(z(c),a.s())};function gh(a,b){this.Ha=a;this.aa=b}gh.prototype.ab=g("Ha");gh.prototype.da=g("aa");function hh(){J.call(this)}t(hh,J);function ih(a,b){J.call(this);this.table=a;this.values=b}t(ih,hh);function jh(a,b){ih.call(this,a,b)}t(jh,ih);function kh(a){J.call(this);this.table=a}t(kh,hh);kh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function lh(a){J.call(this);this.table=a}t(lh,hh);lh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function mh(a){J.call(this);this.O=a}t(mh,hh);mh.prototype.toString=function(){return"select("+this.O.toString()+")"};function nh(a){J.call(this);this.table=a}t(nh,hh);nh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.$a()||(a+=" as "+this.table.$a());return a+")"};function oh(){J.call(this)}t(oh,hh);oh.prototype.toString=l("cross_product");function ph(a,b){J.call(this);this.f=a;this.Sb=b}t(ph,hh);
ph.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Sb)var b=this.Sb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};function qh(a){J.call(this);this.N=a}t(qh,hh);qh.prototype.toString=function(){return"order_by("+qe(this.N)+")"};function rh(a){J.call(this);this.f=a}t(rh,hh);rh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function sh(a){J.call(this);this.f=a}t(sh,hh);
sh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function th(a){J.call(this);this.X=a}t(th,hh);th.prototype.toString=function(){return"limit("+this.X+")"};function uh(a){J.call(this);this.L=a}t(uh,hh);uh.prototype.toString=function(){return"skip("+this.L+")"};function vh(a,b){J.call(this);this.O=a;this.Ub=b}t(vh,hh);vh.prototype.toString=function(){return"join(type: "+(this.Ub?"outer":"inner")+", "+this.O.toString()+")"};function wh(){};function xh(){}t(xh,wh);xh.prototype.gb=function(a){this.G=a;this.xb(this.G);return this.G};xh.prototype.xb=function(a){if(a instanceof mh){var b=yh(this,a.O),b=zh(this,b);Cg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}K(a).forEach(function(a){this.xb(a)},this)};function yh(a,b){if(0==K(b).length||"and"!=b.rb)return[b];var c=K(b).slice().map(function(a){b.removeChild(a);return yh(this,a)},a);return Ea(c)}
function zh(a,b){var c=null,d=null;b.map(function(a,b){var h=new mh(a);0==b?c=h:L(d,h);d=h},a);return[c,d]};function Ah(){}t(Ah,wh);Ah.prototype.gb=function(a,b){if(3>b.from.length)return a;this.G=a;this.xb(this.G);return this.G};Ah.prototype.xb=function(a){if(a instanceof oh)for(;2<K(a).length;){for(var b=new oh,c=0;2>c;c++){var d=ae(a,0);L(b,d)}$d(a,b,0)}K(a).forEach(function(a){this.xb(a)},this)};function Bh(){T.call(this,0,0)}t(Bh,T);Bh.prototype.toString=l("cross_product");Bh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.s(),e=c.s(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var k=Ld(b.entries[f],d,c.entries[h],e);a.push(k)}b=b.s().concat(c.s());return[new H(a,b)]};function Ch(a,b){te.call(this,a,b);this.Ia=a.b(pc);this.Lb=a.b(qc)}t(Ch,te);Ch.prototype.getPriority=l(2);Ch.prototype.he=function(a){0==this.I()?Dh(this,a):this.Pc()};function Dh(a,b){a.vd.forEach(function(a,d){a instanceof pe&&we(this.Lb,a,b[d])},a)}Ch.prototype.Pc=function(){var a=ye(this.Lb,this.da());0!=a.length&&(a=new ve(this.global,a),ze(this.Ia,a))};function Eh(a){je.call(this,a)}t(Eh,je);Eh.prototype.da=function(){var a=C();a.add(this.from);Fh(this,this.from.getName(),a);return a};function Fh(a,b,c){var d=Gh(a.ba.info(),b,1);Gh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Fh(this,a.getName(),c)},a)}Eh.prototype.clone=function(){var a=new Eh(this.ba);me(a,this);a.from=this.from;return a};Eh.prototype.bind=function(a){Eh.hb.bind.call(this,a);oe(this,a);return this};function Hh(a){je.call(this,a)}t(Hh,je);Hh.prototype.da=function(){var a=C();a.add(this.Ka);var b=this.ba.info();Ih(this.Ka.getName(),b.gf).forEach(a.add.bind(a));this.dc&&Gh(b,this.Ka.getName()).forEach(a.add.bind(a));return a};Hh.prototype.clone=function(){var a=new Hh(this.ba);me(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Md?this.values:this.values.slice());a.dc=this.dc;a.ec=this.ec;return a};
Hh.prototype.bind=function(a){Hh.hb.bind.call(this,a);this.ec&&(this.values=this.ec instanceof Md?a[this.ec.Ca()]:this.ec.map(function(b){return b instanceof Md?a[b.Ca()]:b}));return this};function Jh(a){je.call(this,a)}t(Jh,je);Jh.prototype.da=function(){var a=C();a.add(this.table);var b=this.set.map(function(a){return a.J.j()}),c=this.ba.info();Kh(c,b).forEach(a.add.bind(a));Lh(c,b).forEach(a.add.bind(a));return a};Jh.prototype.clone=function(){var a=new Jh(this.ba);me(a,this);a.table=this.table;a.set=this.set?Mh(this.set):this.set;return a};Jh.prototype.bind=function(a){Jh.hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Wc&&(b.value=a[b.Wc])});oe(this,a);return this};
function Mh(a){return a.map(function(a){var c={},d;for(d in a)c[d]=a[d];return c})};function Nh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+ac(b)+"'";default:return"'"+b.toString()+"'"}}function Oh(a,b){var c=a.dc?"INSERT OR REPLACE":"INSERT",d=a.Ka.nb(),c=c+(" INTO "+a.Ka.getName()+"("),c=c+d.map(function(a){return a.getName()}).join(", "),c=c+") VALUES (";return a.values.map(function(a){var f=d.map(function(c){var d=a.m[c.getName()];return b?null!=d?"#":"NULL":Nh(c.I(),d)});return c+f.join(", ")+");"}).join("\n")}
function Ph(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Qh(a,b,c,d){return a instanceof Md?"?"+a.Ca().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Nh(c,a)}).join(", ")+")":"between"==b?Nh(c,a[0])+" AND "+Nh(c,a[1]):Nh(c,a).toString()}
function Rh(a,b){return K(a).map(function(a){return"("+Sh(a,b)+")"}).join("and"==a.rb?" AND ":" OR ")}function Th(a){return[a.ga.j(),Ph(a.C),a.na.j()].join(" ")}function Sh(a,b){if(a instanceof fe){var c=a.J.j(),d=Ph(a.C),e=Qh(a.value,a.C,a.J.I(),b);return"="==d&&"NULL"==e?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==e?[c,"IS NOT NULL"].join(" "):[c,d,e].join(" ")}if(a instanceof Eg)return Rh(a,b);if(a instanceof Hg)return Th(a);throw new E(357,typeof a);}
function Uh(a,b){var c=Sh(a,b);return c?" WHERE "+c:""}function Vh(a,b){var c="UPDATE "+a.table.getName()+" SET ",c=c+a.set.map(function(a){var b=a.J.j()+" = ";return-1!=a.Wc?b+"?"+a.Wc.toString():b+Nh(a.J.I(),a.value).toString()}).join(", ");a.w&&(c+=Uh(a.w,b));return c+";"}
function Wh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.$a()?a.j()+" AS "+a.$a():a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.cb&&0!=a.cb.size?c+=Xh(a,b):(c+=a.from.map(Yh).join(", "),a.w&&(c+=Uh(a.w,b)));if(a.N)var d=a.N.map(function(a){return a.J.j()+(0==a.sb?" DESC":" ASC")}).join(", "),c=c+(" ORDER BY "+d);a.la&&(d=a.la.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+d);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function Yh(a){return Jd(a)!=a.getName()?a.getName()+" AS "+Jd(a):a.getName()}function Xh(a,b){for(var c=xg(a.w,function(a){return a instanceof Hg}),d=c.map(Th),e=Yh(a.from[0]),f=1;f<a.from.length;f++)var h=Yh(a.from[f]),e=a.cb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h),e=e+(" ON ("+d[d.length-f]+")");c=Zd(a.w,0);c instanceof Hg||(e+=" WHERE "+Sh(c,b));return e}
function Zh(a,b){var c=b||!1,d=a.query.clone();if(d instanceof Hh)return Oh(d,c);if(d instanceof Eh){var e="DELETE FROM "+d.from.getName();d.w&&(e+=Uh(d.w,c));return e+";"}if(d instanceof Jh)return Vh(d,c);if(d instanceof pe)return Wh(d,c);throw new E(358,typeof d);};function U(a,b){this.global=a;this.Jg=a.b(oc);this.Ia=a.b(pc);this.query=b}r("lf.query.BaseBuilder",U);U.prototype.exec=function(){try{this.kb()}catch(a){return bb(a)}return new v(function(a,b){var c=new Ch(this.global,[this.Ec()]);ze(this.Ia,c).then(function(b){a(zd(b[0]))},b)},this)};U.prototype.exec=U.prototype.exec;U.prototype.Zf=function(){var a=function(a){return a.Sc(this.query)+"\n"}.bind(this);return Dg($h(this).ab(),a)};U.prototype.explain=U.prototype.Zf;
U.prototype.bind=function(a){this.query.bind(a);return this};U.prototype.bind=U.prototype.bind;U.prototype.Rg=function(a){return Zh(this,a)};U.prototype.toSql=U.prototype.Rg;U.prototype.kb=aa();function $h(a){if(null==a.hf){var b;b=a.Jg;var c=a.query,d=b.sg.create(c);b=b.Gg.create(d,c);a.hf=b}return a.hf}U.prototype.Ec=function(){return{context:this.query.clone(),ke:$h(this)}};function ai(a){U.call(this,a,new Eh(a.b(rc)))}t(ai,U);r("lf.query.DeleteBuilder",ai);ai.prototype.from=function(a){if(null!=this.query.from)throw new E(515);this.query.from=a;return this};ai.prototype.from=ai.prototype.from;ai.prototype.w=function(a){this.Hd();this.query.w=a;return this};ai.prototype.where=ai.prototype.w;ai.prototype.Hd=function(){if(null==this.query.from)throw new E(548);if(null!=this.query.w)throw new E(516);};
ai.prototype.kb=function(){ai.hb.kb.call(this);if(null==this.query.from)throw new E(517);};function bi(a,b){U.call(this,a,new Hh(a.b(rc)));this.query.dc=b||!1}t(bi,U);r("lf.query.InsertBuilder",bi);bi.prototype.kb=function(){bi.hb.kb.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new E(518);if(a.dc&&null===a.Ka.Jb().ed())throw new E(519);};bi.prototype.Ka=function(a){if(null!=this.query.Ka)throw new E(520);this.query.Ka=a;return this};bi.prototype.into=bi.prototype.Ka;
bi.prototype.values=function(a){if(null!=this.query.values)throw new E(521);a instanceof Md||a.some(function(a){return a instanceof Md})?this.query.ec=a:this.query.values=a;return this};bi.prototype.values=bi.prototype.values;function ci(a){return di("and",Array.prototype.slice.call(arguments))}r("lf.op.and",ci);r("lf.op.or",function(a){return di("or",Array.prototype.slice.call(arguments))});function di(a,b){var c=new Eg(a);b.forEach(function(a){L(c,a)});return c}r("lf.op.not",function(a){a.xd(!0);return a});function V(a,b){U.call(this,a,new pe(a.b(rc)));this.Ne=this.Cd=!1;this.query.f=b;ei(this);fi(this)}t(V,U);r("lf.query.SelectBuilder",V);V.prototype.kb=function(){V.hb.kb.call(this);var a=this.query;if(null==a.from)throw new E(522);if(q(a.Vb)&&!q(a.X)||q(a.bc)&&!q(a.L))throw new E(523);null!=this.query.la?gi(this):hi(this)};function ei(a){var b=a.query.f.filter(function(a){return a instanceof S&&"DISTINCT"==a.Ob},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new E(524);}
function gi(a){var b=a.query.f.filter(function(a){return!(a instanceof S)}).map(function(a){return a.j()}),c=!1;if(0==a.query.la.length||0==a.query.f.length)c=!0;else{var d=a.query.la.map(function(a){return a.j()});(c=b.some(function(a){return-1==d.indexOf(a)}))||(c=a.query.la.some(function(a){a=a.I();return 6==a||0==a}))}if(c)throw new E(525);}
function hi(a){var b=a.query.f.some(function(a){return a instanceof S},a);a=a.query.f.some(function(a){return!(a instanceof S)},a)||0==a.query.f.length;if(b&&a)throw new E(526);}function fi(a){a.query.f.forEach(function(a){if(a instanceof S&&!ii(a.Ob,a.I()))throw new E(527,a.j());},a)}function ji(a,b){if(null==a.query.from)throw new E(b);}
V.prototype.from=function(a){if(this.Ne)throw new E(515);this.Ne=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};V.prototype.from=V.prototype.from;V.prototype.w=function(a){ji(this,548);if(this.Cd)throw new E(516);this.Cd=!0;ki(this,a);return this};V.prototype.where=V.prototype.w;function ki(a,b){if(null!=a.query.w){var c=ci(b,a.query.w);a.query.w=c}else a.query.w=b}
V.prototype.jg=function(a,b){ji(this,542);if(this.Cd)throw new E(547);this.query.from.push(a);ki(this,b);return this};V.prototype.innerJoin=V.prototype.jg;V.prototype.qg=function(a,b){ji(this,542);if(!(b instanceof Hg))throw new E(541);if(this.Cd)throw new E(547);this.query.from.push(a);null==this.query.cb&&(this.query.cb=C());var c=b;Jd(a)!=Jd(b.na.H())&&(c=b.reverse());this.query.cb.add(c.W());ki(this,c);return this};V.prototype.leftOuterJoin=V.prototype.qg;
V.prototype.X=function(a){if(null!=(this.query.X||this.query.Vb))throw new E(528);if(a instanceof Md)this.query.Vb=a;else{if(0>a)throw new E(531);this.query.X=a}return this};V.prototype.limit=V.prototype.X;V.prototype.L=function(a){if(null!=(this.query.L||this.query.bc))throw new E(529);if(a instanceof Md)this.query.bc=a;else{if(0>a)throw new E(531);this.query.L=a}return this};V.prototype.skip=V.prototype.L;
V.prototype.N=function(a,b){ji(this,549);null==this.query.N&&(this.query.N=[]);this.query.N.push({J:a,sb:null!=b?b:1});return this};V.prototype.orderBy=V.prototype.N;V.prototype.la=function(a){ji(this,549);if(null!=this.query.la)throw new E(530);null==this.query.la&&(this.query.la=[]);this.query.la.push.apply(this.query.la,Array.prototype.slice.call(arguments));return this};V.prototype.groupBy=V.prototype.la;
function ii(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}V.prototype.clone=function(){var a=new V(this.global,this.query.f);a.query=this.query.clone();a.query.Zc=null;return a};V.prototype.clone=V.prototype.clone;function li(a,b){U.call(this,a,new Jh(a.b(rc)));this.query.table=b}t(li,U);r("lf.query.UpdateBuilder",li);li.prototype.set=function(a,b){var c={Wc:b instanceof Md?b.Ca():-1,J:a,value:b};null!=this.query.set?this.query.set.push(c):this.query.set=[c];return this};li.prototype.set=li.prototype.set;li.prototype.w=function(a){this.Hd();this.query.w=a;return this};li.prototype.where=li.prototype.w;li.prototype.Hd=function(){if(null!=this.query.w)throw new E(516);};
li.prototype.kb=function(){li.hb.kb.call(this);if(null==this.query.set)throw new E(532);if(this.query.set.some(function(a){return a.value instanceof Md}))throw new E(501);};function mi(a){this.query=a;this.Ha=null}mi.prototype.jc=function(){null===this.Ha&&(this.Ha=this.cd());return this.Ha};function ni(a){mi.call(this,a)}t(ni,mi);ni.prototype.cd=function(){return this.query.dc?new jh(this.query.Ka,this.query.values):new ih(this.query.Ka,this.query.values)};function oi(a){mi.call(this,a)}t(oi,mi);oi.prototype.cd=function(){var a=new lh(this.query.table),b=null!=this.query.w?new mh(this.query.w.Pb()):null,c=new nh(this.query.table);null===b?L(a,c):(L(b,c),L(a,b));return a};function pi(a,b,c){this.Ha=a;this.le=b;this.Yb=c}pi.prototype.jc=function(){this.Yb.forEach(function(a){this.Ha=a.gb(this.Ha,this.le)},this);return this.Ha};function qi(a,b){mi.call(this,a);this.Yb=b}t(qi,mi);qi.prototype.cd=function(){var a=new kh(this.query.from),b=null!=this.query.w?new mh(this.query.w.Pb()):null,c=new nh(this.query.from);null===b?L(a,c):(L(b,c),L(a,b));return(new pi(a,this.query,this.Yb)).jc()};function ri(){}t(ri,wh);ri.prototype.gb=function(a,b){if(2>b.from.length)return a;this.G=a;this.xb(this.G,b);return this.G};ri.prototype.xb=function(a,b){if(a instanceof mh&&a.O instanceof Hg){var c=a.O.W(),d=Zd(a,0);d instanceof oh&&(c=null!=b.cb&&b.cb.has(c),c=new vh(a.O,c),Cg(a,d,c,c),a==this.G&&(this.G=c),a=c)}K(a).forEach(function(a){this.xb(a,b)},this)};function si(){this.Vc=C()}t(si,wh);si.prototype.gb=function(a,b){if(!q(b.w))return a;this.Vc.clear();this.G=a;this.xb(this.G,b);this.Vc.clear();return this.G};si.prototype.xb=function(a,b){var c=function(a){K(a).forEach(d)}.bind(this),d=function(a){if(!this.Vc.has(a)){if(a instanceof mh){var f=a.O.s(),h=function(a){return ti(this,a,f)}.bind(this),h=ui(this,b,a,h);this.Vc.add(a);h!=a&&(fa(h.getParent())&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function ui(a,b,c,d){var e=c;if(vi(b,c))e=Ag(c),ui(a,b,c,d);else if(wi(c)){var f=[],e=Bg(c,d,function(a){a=new mh(a.O);f.push(a);return a});f.forEach(function(a){ui(this,b,a,d)},a)}return e}function ti(a,b,c){var d=C();wg(b).forEach(function(a){d.add(a.table)},a);b instanceof nh&&d.add(b.table);return xc(d,c)}function wi(a){a=Zd(a,0);return a instanceof oh||a instanceof vh}
function vi(a,b){var c=Zd(b,0);if(!(c instanceof mh))return!1;if(null==a.cb)return!0;var d=b.O instanceof Hg,c=a.cb.has(c.O.W());return d||!c};function xi(a,b){mi.call(this,a);this.Yb=b;this.mf=this.cf=this.vf=this.ff=this.Ee=this.Se=this.uf=this.Ke=this.xf=null}t(xi,mi);
xi.prototype.cd=function(){yi(this);2<=this.query.from.length&&(this.Ke=new oh);this.uf=null!=this.query.w?new mh(this.query.w.Pb()):null;this.query.N&&(this.ff=new qh(this.query.N));null!=this.query.L&&0<this.query.L&&(this.vf=new uh(this.query.L));null!=this.query.X&&(this.cf=new th(this.query.X));null!=this.query.la&&(this.Se=new sh(this.query.la));zi(this);this.mf=new ph(this.query.f||[],this.query.la||null);var a=Ai(this);return(new pi(a,this.query,this.Yb)).jc()};
function Ai(a){for(var b=[a.cf,a.vf,a.mf,a.ff,a.Ee,a.Se,a.uf,a.Ke],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:L(b[c],f),c=e)}a.xf.forEach(function(a){L(b[c],a)});return d}function yi(a){a.xf=a.query.from.map(function(a){return new nh(a)},a)}function zi(a){var b=a.query.f.filter(function(a){return a instanceof S});null!=a.query.N&&a.query.N.forEach(function(a){a.J instanceof S&&b.push(a.J)});0<b.length&&(a.Ee=new rh(b))};function Bi(){this.se=[new xh,new Ah,new si,new ri];this.Rd=[new xh]}Bi.prototype.create=function(a){var b=null;if(a instanceof Hh)b=new ni(a);else if(a instanceof Eh)b=new qi(a,this.Rd);else if(a instanceof pe)b=new xi(a,this.se);else if(a instanceof Jh)b=new oi(a);else throw new E(513);b=b.jc();return new gh(b,a.da())};function Ci(a){T.call(this,0,1);this.U=a}t(Ci,T);Ci.prototype.toString=function(){return"delete("+this.U.getName()+")"};Ci.prototype.ca=function(a,b){var c=a[0].entries.map(function(a){return a.va});b.remove(this.U,c);return[Dd()]};function Di(a,b){T.call(this,0,-1);this.table=b;this.D=a.b(nc)}t(Di,T);Di.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Di.prototype.ca=function(){var a=this.D.get(bf(this.table)),b=new H([],[this.table.getName()]),c=Sg(),a=a.Y().ia;null===b.Za&&(b.Za=y());b.Za.set(c.j(),a);return[b]};function Ei(a,b){T.call(this,0,-1);this.V=a.b(mc);this.D=a.b(nc);this.table=b}t(Ei,T);Ei.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.$a()||(a+=" as "+this.table.$a());return a+")"};Ei.prototype.ca=function(){var a=this.D.get(bf(this.table)).Ua();return[Gd(uf(this.V,a),[Jd(this.table)])]};function Fi(a){this.c=a}t(Fi,wh);Fi.prototype.gb=function(a,b){this.G=a;if(!this.Jd(b))return a;var c=xg(a,function(a){return a instanceof Ei})[0],d=new Di(this.c,c.table);Cg(c,c,d,d);return this.G};Fi.prototype.Jd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.w&&null==a.X&&null==a.L&&null==a.la?(a=a.f[0],a instanceof S&&"COUNT"==a.Ob&&a.child instanceof Rg):!1};function Gi(a){T.call(this,0,1);this.Re=a}t(Gi,T);Gi.prototype.toString=function(){return"groupBy("+this.Re.map(function(a){return a.j()}).toString()+")"};Gi.prototype.ca=function(a){return Hi(this,a[0])};function Hi(a,b){var c=new Sc,d=function(a){return this.Re.map(function(b){return I(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new H(c.get(a),b.s())},a)};function Ii(a,b,c){T.call(this,0,0);this.D=a.b(nc);this.V=a.b(mc);this.O=b;this.Ub=c;this.Fd="eq"==this.O.C?0:2;this.Ue=null}t(Ii,T);var Ji=["hash","index_nested_loop","nested_loop"];Ii.prototype.toString=function(){return"join(type: "+(this.Ub?"outer":"inner")+", impl: "+Ji[this.Fd]+", "+this.O.toString()+")"};
Ii.prototype.ca=function(a){switch(this.Fd){case 0:return[Lg(this.O,a[0],a[1],this.Ub)];case 1:return[Mg(this.O,a[0],a[1],this.Ue,this.V)];default:var b=this.O,c=a[0];a=a[1];var d=this.Ub,e=[c,a];d||(e=Ig(b,c,a));c=e[0];a=e[1];for(var e=[],f=c.s(),h=a.s(),k=c.entries.length,n=a.entries.length,B=n+256-1>>8,O=0;O<B;){for(var ea=0;ea<k;ea++){var Cb=!1,bg=I(c.entries[ea],b.ga);if(null!==bg)for(var fc=Math.min(O+1<<8,n),Db=O<<8;Db<fc;Db++)if(b.yc(bg,I(a.entries[Db],b.na))){var Cb=!0,Uc=Ld(c.entries[ea],
f,a.entries[Db],h);e.push(Uc)}d&&!Cb&&e.push(Kg(b,c.entries[ea],f))}O++}b=c.s().concat(a.s());return[new H(e,b)]}};function Ki(a,b){a.Fd=1;var c=a.D.get(b.Ca().j());a.Ue={fg:b,yg:b==a.O.ga?a.O.na:a.O.ga,index:c}};function Li(a){T.call(this,0,-1);this.nf=a}t(Li,T);Li.prototype.toString=function(){return"no_op_step("+this.nf[0].s().join(",")+")"};Li.prototype.ca=g("nf");function Mi(){}t(Mi,wh);Mi.prototype.gb=function(a,b){this.G=a;if(!this.Jd(b))return a;xg(a,function(a){return a instanceof Ii}).forEach(this.Ig,this);return this.G};Mi.prototype.Jd=function(a){return 1<a.from.length};
Mi.prototype.Ig=function(a){if("eq"==a.O.C&&!a.Ub){var b=function(b){if(!(b instanceof Ei))return null;b=Jd(b.table)==Jd(a.O.na.H())?a.O.na:a.O.ga;return fa(b.Ca())?null:b},c=b(Zd(a,0)),b=b(Zd(a,1));if(null!==c||null!==b){b=null===b?c:b;Ki(a,b);var d=new H([],[Jd(b.H())]);be(a,new Li([d]),b==c?0:1)}}};function Ni(a){a=a.map(function(a){return a.ra()});a=zb.apply(null,a);var b=[];yb(a,function(a){b.push(a)});return b}function Oi(a){this.Tb=a}Oi.prototype.dd=function(){return 1==this.Tb.f.length?[td()]:[this.Tb.f.map(function(){return td()})]};function Pi(a,b){this.Tb=a;this.Ga=b;this.Nd=this.af=null}
function Qi(a,b){var c=y();a.Ga.keys().forEach(function(a){var e=this.Ga.get(a).map(function(a){return ke(b,a)},this),f=new xd([td()]);e.forEach(function(a){f=yd(f,a.xe())});c.set(a,f)},a);return c}Pi.prototype.dd=function(a){if(this.af==a)return this.Nd;for(var b=Qi(this,a),c=this.Tb.f.length-1;0<=c;c--){var d=this.Tb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new xd([td()]))}this.Nd=1==this.Tb.f.length?z(b)[0].ra():Ni(Ri(this,b));this.af=a;return this.Nd};
function Ri(a,b){var c=y(),d=0;a.Tb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return Wb(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Si(a,b){this.zd=b;this.D=a.b(nc)}function Ti(a){a=a.D.get(bf(a.zd));return Math.floor(.02*a.Y().ia)}function Ui(a,b,c){c=c.filter(a.mg,a);if(0==c.length)return null;a=Vi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var h=Wi(c,b);return h<d?(d=h,c):a},null)}
function Vi(a,b){return a.zd.Da().map(function(a){a=new Xi(this.D,a);Yi(a,b);return a},a).filter(function(a){if(null===a.Ga)a=!1;else{for(var b=!1,e=!0,f=0;f<a.bb.f.length;f++){var h=a.Ga.has(a.bb.f[f].ba.getName());if(b&&h){e=!1;break}h||(b=!0)}a=e}return a})}Si.prototype.mg=function(a){return a instanceof fe?!a.od()||a.J.H()!=this.zd||"in"==a.C&&a.value.length>Ti(this)?!1:!0:a instanceof Eg?a.od()&&Zd(a,0).J.H()==this.zd?K(a).length<=Ti(this):!1:!1};
function Xi(a,b){this.D=a;this.bb=b;this.gg=C(this.bb.f.map(function(a){return a.ba.getName()}));this.be=this.Ga=null}function Zi(a){null===a.be&&(a.be=new Pi(a.bb,a.Ga));return a.be}function Yi(a,b){b.forEach(function(a){var b=a.nb()[0].getName();this.gg.has(b)&&(null===this.Ga&&(this.Ga=new Sc),this.Ga.set(b,a.W()))},a)}function Wi(a,b){var c=Zi(a).dd(b),d=a.D.get(a.bb.j());return c.reduce(function(a,b){return a+d.ad(b)},0)};function $i(a,b,c,d){T.call(this,0,-1);this.D=a.b(nc);this.index=b;this.$e=c;this.pe=d;this.Uc=this.Tc=!1}t($i,T);$i.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.pe?"reverse":"natural")+(this.Tc?", limit:?":"")+(this.Uc?", skip:?":"")+")"};$i.prototype.Sc=function(a){var b=this.toString(),c=this.$e.dd(a),b=b.replace("?",c.toString());this.Tc&&(b=b.replace("?",a.X.toString()));this.Uc&&(b=b.replace("?",a.L.toString()));return b};
$i.prototype.ca=function(a,b,c){a=this.$e.dd(c);b=this.D.get(this.index.j());c=(1==a.length&&a[0]instanceof F&&ud(a[0])?yf(b.get(a[0].from),!1,this.Tc?c.X:void 0,this.Uc?c.L:void 0):b.Ua(a,this.pe,this.Tc?c.X:void 0,this.Uc?c.L:void 0)).map(function(a){return new Xb(a,{})},this);return[Gd(c,[this.index.pc])]};function aj(){T.call(this,0,0)}t(aj,T);aj.prototype.toString=l("multi_index_range_scan()");
aj.prototype.ca=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.va.id(),a)})});var c=z(b);return[new H(c,a[0].s())]};function bj(a){T.call(this,0,1);this.mc=a}t(bj,T);bj.prototype.toString=l("select(?)");bj.prototype.Sc=function(a){a=ke(a,this.mc);return this.toString().replace("?",a.toString())};bj.prototype.ca=function(a,b,c){return[ke(c,this.mc).eval(a[0])]};function cj(a,b){T.call(this,0,1);this.V=a.b(mc);this.U=b}t(cj,T);cj.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};cj.prototype.ca=function(a){return[Gd(uf(this.V,Ad(a[0])),[Jd(this.U)])]};function dj(a){this.c=a}t(dj,wh);dj.prototype.gb=function(a,b){this.G=a;xg(a,function(a){return a instanceof Ei}).forEach(function(a){var d=ej(a);if(0!=d.length){var e=Ui(new Si(this.c,a.table),b,d.map(function(a){return ke(b,a.mc)}));if(null!==e){var f=y();d.forEach(function(a){f.set(a.mc,a)},this);this.G=fj(this,e,f,a)}}},this);return this.G};function ej(a){var b=[];for(a=a.getParent();a;){if(a instanceof bj)b.push(a);else if(a instanceof Ii)break;a=a.getParent()}return b}
function fj(a,b,c,d){(null===b.Ga?[]:b.Ga.values()).map(function(a){return c.get(a)}).forEach(yg);b=new $i(a.c,b.bb,Zi(b),!1);a=new cj(a.c,d.table);L(a,b);Cg(d,d,a,b);return b.ab()};function gj(a,b){T.call(this,0,-1);this.D=a.b(nc);this.U=b}t(gj,T);gj.prototype.toString=function(){return"insert("+this.U.getName()+")"};gj.prototype.ca=function(a,b,c){hj(this.U,c.values,this.D);b.Db(this.U,c.values);return[Gd(c.values,[this.U.getName()])]};function hj(a,b,c){a=a.Jb().ed();if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).Y().Ic;var e=null===c?0:c;b.forEach(function(a){if(0==a.m[d]||null==a.m[d])e++,a.m[d]=e})}}
function ij(a,b){T.call(this,0,-1);this.D=a.b(nc);this.U=b}t(ij,T);ij.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};ij.prototype.ca=function(a,b,c){hj(this.U,c.values,this.D);b.Yd(this.U,c.values);return[Gd(c.values,[this.U.getName()])]};function jj(){T.call(this,0,1)}t(jj,T);jj.prototype.toString=l("limit(?)");jj.prototype.Sc=function(a){return this.toString().replace("?",a.X.toString())};jj.prototype.ca=function(a,b,c){a[0].entries.splice(c.X);return a};function kj(a){T.call(this,0,1);this.N=a}t(kj,T);m=kj.prototype;m.toString=function(){return"order_by("+qe(this.N)+")"};m.ca=function(a){if(1==a.length){var b;b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=Tg(this.N[d].J);if(null!==b.Za&&b.Za.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Bd(a[0],b)).entries.sort(this.Wf.bind(this))}else a.sort(this.Lg.bind(this));return a};
m.$=function(a,b){var c=null,d=null,e=null,f=-1;do f++,e=this.N[f].J,c=this.N[f].sb,d=a(e),e=b(e);while(d==e&&f+1<this.N.length);d=d<e?-1:d>e?1:0;return 1==c?d:-d};m.Lg=function(a,b){return this.$(function(b){return b instanceof S?Bd(a,b):I(a.entries[a.entries.length-1],b)},function(a){return a instanceof S?Bd(b,a):I(b.entries[b.entries.length-1],a)})};m.Wf=function(a,b){return this.$(function(b){return I(a,b)},function(a){return I(b,a)})};function lj(a,b){this.Ma=a;this.K=b}function mj(a){return a.K.some(function(a){return a instanceof S},a)?nj(a):oj(a)}function nj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Ob)return a=Bd(a.Ma,a.K[0]).entries.map(function(a){var b=new Hd(new Xb(-1,{}),1<this.Ma.M.size);Kd(b,this.K[0],I(a,this.K[0].child));return b},a),new H(a,[]);var b=new Hd(new Xb(-1,{}),1<a.Ma.M.size);a.K.forEach(function(a){var d=a instanceof S?Bd(this.Ma,a):I(this.Ma.entries[0],a);Kd(b,a,d)},a);return new H([b],a.Ma.s())}
function oj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.M.size;a.Ma.entries.forEach(function(a,e){b[e]=new Hd(new Xb(a.va.id(),{}),c);this.K.forEach(function(c){Kd(b[e],c,I(a,c))},this)},a);return new H(b,a.Ma.s())}function pj(a,b){var c=a.map(function(a){return mj(new lj(a,b)).entries[0]});return new H(c,a[0].s())};function qj(a,b){T.call(this,0,1);this.f=a;this.Sb=b}t(qj,T);qj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Sb)var b=this.Sb.map(function(a){return a.j()}).join(", "),a=a+(", groupBy("+b+")");return a+")"};qj.prototype.ca=function(a){0==a.length?a=[Dd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:mj(new lj(a,this.f))]):a=[pj(a,this.f)];return a};function rj(a){return a.f.some(function(a){return a instanceof S})||null!==a.Sb};function sj(){T.call(this,0,1)}t(sj,T);sj.prototype.toString=l("skip(?)");sj.prototype.Sc=function(a){return this.toString().replace("?",a.L.toString())};sj.prototype.ca=function(a,b,c){return[new H(a[0].entries.slice(c.L),a[0].s())]};function tj(){}t(tj,wh);tj.prototype.gb=function(a,b){if(!q(b.X)&&!q(b.L))return a;var c=uj(a);if(null===c)return a;xg(a,function(a){return a instanceof jj||a instanceof sj}).forEach(function(a){a instanceof jj?c.Tc=!0:c.Uc=!0;yg(a)},this);return c.ab()};function uj(a){a=xg(a,function(a){return a instanceof $i},function(a){return a instanceof qj&&rj(a)||a instanceof kj||1!=K(a).length||a instanceof bj});return 0<a.length?a[0]:null};function vj(a){this.c=a}t(vj,wh);vj.prototype.gb=function(a,b){this.G=a;var c=wj(this,b);if(0==c.length)return this.G;var d=null,e=null,f=0;do e=c[f++],d=xj(this,e,b);while(null===d&&f<c.length);if(null===d)return this.G;c=yj(this,d[0].bb.pc);return null===c?this.G:this.G=zj(this,e,c,d)};function wj(a,b){return xg(a.G,function(a){if(!(a instanceof bj))return!1;a=ke(b,a.mc);return a instanceof Eg&&"or"==a.rb})}
function yj(a,b){return xg(a.G,function(a){return a instanceof Ei&&a.table.getName()==b})[0]||null}function xj(a,b,c){b=ke(c,b.mc);var d=b.s();if(1!=d.size)return null;var d=D(d)[0],e=new Si(a.c,d),f=null;return K(b).every(function(a){a=Ui(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function zj(a,b,c,d){var e=new cj(a.c,c.table),f=new aj;L(e,f);d.forEach(function(a){a=new $i(this.c,a.bb,Zi(a),!1);L(f,a)},a);yg(b);Cg(c,c,e,f);return f.ab()};function Aj(a){this.c=a}t(Aj,wh);Aj.prototype.gb=function(a,b){var c=Bj(a,b);if(null===c)return a;var d;a:{var e=c;d=Cj(Zd(c,0));if(null!==d){var f;f=c.N;for(var h=null,k=d.table.Da(),n=0;n<k.length&&null===h;n++)h=Dj(k[n],f);f=h;if(null===f){d=e;break a}e=new $i(this.c,f.bb,new Oi(f.bb),f.Xe);f=new cj(this.c,d.table);L(f,e);yg(c);e=Cg(d,d,f,e)}d=e}if(d==c)a:if(d=c,e=Ej(Zd(c,0)),null!==e){f=Dj(e.index,c.N);if(null===f)break a;e.pe=f.Xe;d=yg(c).parent}return d.ab()};
function Ej(a){a=xg(a,function(a){return a instanceof $i},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Cj(a){a=xg(a,function(a){return a instanceof Ei},function(a){return 1!=K(a).length});return 0<a.length?a[0]:null}function Bj(a,b){return q(b.N)?xg(a,function(a){return a instanceof kj})[0]:null}function Dj(a,b){if(a.f.length!=b.length||!b.every(function(b,c){return b.J.getName()==a.f[c].ba.getName()}))return null;var c=Fj(b,a);return c[0]||c[1]?{bb:a,Xe:c[1]}:null}
function Fj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.sb?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.sb?0:1)},0),c=c^d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Gj(a,b,c){this.Ha=a;this.le=b;this.Yb=c}Gj.prototype.jc=function(){this.Yb.forEach(function(a){this.Ha=a.gb(this.Ha,this.le)},this);return this.Ha};function Hj(a){T.call(this,0,1);this.U=a}t(Hj,T);Hj.prototype.toString=function(){return"update("+this.U.getName()+")"};Hj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.U.mb(a.va.Ja());c.set.forEach(function(a){b.m[a.J.getName()]=a.value},this);return b},this);b.update(this.U,a);return[Dd()]};function Ij(a){this.c=a;this.se=[new Mi,new dj(this.c),new vj(this.c),new Aj(this.c),new tj,new Fi(this.c)];this.Rd=[new dj(this.c)]}Ij.prototype.create=function(a,b){var c=a.ab();if(c instanceof jh||c instanceof ih)return Jj(this,a,b);if(c instanceof ph||c instanceof th||c instanceof uh)return Jj(this,a,b,this.se);if(c instanceof kh||c instanceof lh)return Jj(this,a,b,this.Rd);throw new E(8);};
function Jj(a,b,c,d){a=vg(b.ab(),a.vg.bind(a));null!=d&&(a=(new Gj(a,c,d)).jc());return new re(a,b.da())}
Ij.prototype.vg=function(a){if(a instanceof ph)return new qj(a.f,a.Sb);if(a instanceof sh)return new Gi(a.f);if(a instanceof rh)return new Xg(a.f);if(a instanceof qh)return new kj(a.N);if(a instanceof uh)return new sj;if(a instanceof th)return new jj;if(a instanceof mh)return new bj(a.O.W());if(a instanceof oh)return new Bh;if(a instanceof vh)return new Ii(this.c,a.O,a.Ub);if(a instanceof nh)return new Ei(this.c,a.table);if(a instanceof kh)return new Ci(a.table);if(a instanceof lh)return new Hj(a.table);
if(a instanceof jh)return new ij(this.c,a.table);if(a instanceof ih)return new gj(this.c,a.table);throw new E(514);};function Kj(a){this.sg=new Bi;this.Gg=new Ij(a)};function Lj(){this.df=y()}function Mj(a,b){var c=a.df.get(b.getName())||null;null===c&&(c=new Nj,a.df.set(b.getName(),c));return c}function Oj(a,b,c,d){c.forEach(function(a){a=Mj(this,a);0==d?(a.eb=null,a.zc=b):3==d?(null===a.ac&&(a.ac=C()),a.ac.add(b),null===a.Xa&&(a.Xa=C()),a.Xa.delete(b)):1==d?(null===a.Xa&&(a.Xa=C()),a.Xa.add(b)):2==d&&(a.eb=b)},a)}
function Pj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Mj(this,a);var c=null===a.Xa||0==a.Xa.size;e=0==d?(null===a.ac||0==a.ac.size)&&c&&null===a.zc&&null!==a.eb&&a.eb==b:3==d?null===a.zc&&null===a.eb&&null!==a.Xa&&a.Xa.has(b):1==d?null===a.eb:c&&(null===a.eb||a.eb==b)}},a);return e}function Qj(a,b,c,d){var e=Pj(a,b,c,d);e&&Oj(a,b,c,d);return e}Lj.prototype.releaseLock=function(a,b){b.forEach(function(b){Mj(this,b).releaseLock(a)},this)};
function Rj(a,b){b.forEach(function(a){Mj(this,a).eb=null},a)}function Nj(){this.ac=this.Xa=this.eb=this.zc=null}Nj.prototype.releaseLock=function(a){this.zc==a&&(this.zc=null);this.eb==a&&(this.eb=null);null===this.Xa||this.Xa.delete(a);null===this.ac||this.ac.delete(a)};function Sj(){this.Xb=new Tj;this.Hc=new Lj}function ze(a,b){(2>b.getPriority()||2>b.getPriority())&&Rj(a.Hc,b.da());a.Xb.Db(b);Uj(a);return b.Rb().ha}function Uj(a){for(var b=a.Xb.ra(),c=0;c<b.length;c++){var d=b[c],e=!1;if(e=0==d.I()?Vj(a,d,1,3):Vj(a,d,2,0))a.Xb.remove(d),e=a,d.exec().then(e.Dg.bind(e,d),e.Cg.bind(e,d))}}function Vj(a,b,c,d){var e=!1;Qj(a.Hc,b.W(),b.da(),c)&&(e=Qj(a.Hc,b.W(),b.da(),d));return e}Sj.prototype.Dg=function(a,b){this.Hc.releaseLock(a.W(),a.da());a.Rb().resolve(b);Uj(this)};
Sj.prototype.Cg=function(a,b){this.Hc.releaseLock(a.W(),a.da());a.Rb().reject(b);Uj(this)};function Tj(){this.Xb=[]}Tj.prototype.Db=function(a){xf(this.Xb,a,function(a,c){var d=a.getPriority()-c.getPriority();return 0==d?a.W()-c.W():d})};Tj.prototype.ra=function(){return this.Xb.slice()};Tj.prototype.remove=function(a){var b=this.Xb;a=xa(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Wj(){this.Qc=y()}var Xj;function Yj(){Xj||(Xj=new Wj);return Xj}Wj.prototype.clear=function(){this.Qc.clear()};Wj.prototype.clear=Wj.prototype.clear;Wj.prototype.ub=function(a,b){this.Qc.set(a.toString(),b);return b};Wj.prototype.registerService=Wj.prototype.ub;Wj.prototype.b=function(a){var b=this.Qc.get(a.toString())||null;if(null===b)throw new E(7,a.toString());return b};Wj.prototype.getService=Wj.prototype.b;Wj.prototype.pd=function(a){return this.Qc.has(a.toString())};
Wj.prototype.isRegistered=Wj.prototype.pd;function Zj(){var a=Yj();return Wb(a.Qc)};function ak(a,b,c,d){return null!=a?null!=b?bk(a,b,c,d):ck(a):dk()}function ek(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function fk(a){var b=Yj();a=new kc("ns_"+a);return b.pd(a)?b.b(a):null}function dk(){var a={};Zj().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=fk(b).b(rc).version())});return ek(a)}function ck(a){a=fk(a);var b={};if(null!=a){var c=a.b(nc);a.b(rc).pa().forEach(function(a){b[a.getName()]=c.get(bf(a)).Y().ia})}return ek(b)}
function bk(a,b,c,d){var e=fk(a);a=[];if(null!=e){var f=null;try{f=e.b(rc).table(b)}catch(h){}null!=f&&(b=e.b(nc),e=e.b(mc),c=b.get(bf(f)).Ua(void 0,!1,c,d),c.length&&(a=uf(e,c).map(function(a){return a.m})))}return ek(a)};function gk(a,b){this.Sd=Vd();this.me=a;this.rd=b;this.K=hk(this)}function hk(a){if(0<a.me.f.length)return a.me.f;var b=[];a.me.from.forEach(function(a){a.nb().forEach(function(a){b.push(a)})});return b}gk.prototype.$=function(a,b){return this.K.every(function(c){return Wd(this.Sd,c.I(),"eq")(I(a,c),I(b,c))},this)};
function ik(a,b,c){var d=null===b?[]:b.entries,e=qb(d,c.entries,a.$.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var k=d[h];e[f]==k?f++:(k=a.rd.splice(f,1),k=jk(h,k,0,a.rd),b.push(k))}e=qb(d,c.entries,a.$.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)k=c.entries[h],e[f]==k?f++:(a.rd.splice(h,0,k.va.m),k=jk(h,[],1,a.rd),b.push(k));return b}function jk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function kk(){this.ic=y()}kk.prototype.Ed=function(a,b){var c=ka(a.query).toString(),d=this.ic.get(c)||null;null===d&&(d=new lk(a),this.ic.set(c,d));d.Ed(b)};kk.prototype.ne=function(a,b){var c=ka(a.query).toString(),d=this.ic.get(c)||null;d.ne(b);0<d.Kc.size||this.ic.delete(c)};function ye(a,b){var c=C();b.forEach(function(a){c.add(a.getName())});var d=[];a.ic.forEach(function(a){a=a.Ec();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function we(a,b,c){b=ka(null!=b.Zc?b.Zc:b).toString();a=a.ic.get(b)||null;null!==a&&mk(a,c)}function lk(a){this.Jf=a;this.Kc=C();this.Ag=[];this.bf=null;this.Uf=new gk(a.query,this.Ag)}lk.prototype.Ed=function(a){this.Kc.has(a)||this.Kc.add(a)};lk.prototype.ne=function(a){return this.Kc.delete(a)};lk.prototype.Ec=function(){var a=this.Jf;return{context:a.query,ke:$h(a)}};function mk(a,b){var c=ik(a.Uf,a.bf,b);a.bf=b;0<c.length&&a.Kc.forEach(function(a){a(c)})};function nk(a,b){var c=a.b(rc),d=b||{},e=new tf(c);a.ub(mc,e);var e=null,f=!1;null!=d.storeType?e=d.storeType:(e=Ub(),e=e.hg?0:e.Wg?4:1);switch(e){case 0:e=new Ye(a,c);break;case 1:e=new ef(c);break;case 5:e=new gf(c);break;case 4:e=new qf(a,c,d.webSqlDbSize);break;case 3:e=new Le(c,d.firebase);f=!0;break;default:throw new E(300);}a.ub(lc,e);var h=new ug;a.ub(nc,h);return e.Ea(d.onUpgrade).then(function(){var b=new Kj(a);a.ub(oc,b);b=new Sj;a.ub(pc,b);b=new kk;a.ub(qc,b);return h.Ea(c)}).then(function(){if(f){var b=
new Ae(a);b.Na.subscribe(b.fe.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=ak);return(new ng(a)).Ea(c)})};function ok(a){this.c=a;this.g=a.b(rc);this.aa=C(this.g.pa());this.fb=fb()}function pk(a){var b=a.c.b(nc),c=a.c.b(mc),d={};a.g.pa().forEach(function(a){var f=b.get(bf(a)).Ua(),f=uf(c,f).map(function(a){return a.m});d[a.getName()]=f});return{name:a.g.name(),version:a.g.version(),tables:d}}m=ok.prototype;m.exec=function(){var a=pk(this),a=new Hd(new Xb(-1,a),!0);return w([new H([a],[])])};m.I=l(0);m.da=g("aa");m.Rb=g("fb");m.W=function(){return ka(this)};m.getPriority=l(0);function qk(a,b){this.c=a;this.g=a.b(rc);this.aa=C(this.g.pa());this.fb=fb();this.Ba=b;this.Na=a.b(lc);this.V=a.b(mc);this.D=a.b(nc)}m=qk.prototype;
m.exec=function(){if(!(this.Na instanceof Ye||this.Na instanceof ef||this.Na instanceof qf))throw new E(300);var a;a:{a=this.g.pa();for(var b=0;b<a.length;++b)if(0<this.D.get(bf(a[b])).Y().ia){a=!1;break a}a=!0}if(!a)throw new E(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new E(111);if(null==this.Ba.tables)throw new E(112);return rk(this)};m.I=l(1);m.da=g("aa");m.Rb=g("fb");m.W=function(){return ka(this)};m.getPriority=l(0);
function rk(a){var b=new kd(a.c,a.aa),b=a.Na.Hb(a.I(),D(a.aa),b),c;for(c in a.Ba.tables){var d=a.g.table(c),e=a.Ba.tables[c].map(function(a){return d.Ab(a)}),f=b.H(c,d.mb,0);a.V.Zb(c,e);var h=a.D.oc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.pb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function sk(a,b){this.c=a;this.Na=a.b(lc);this.Ia=a.b(pc);this.Lb=a.b(qc);this.aa=C(b);this.Qa=new kd(this.c,this.aa);this.fb=fb();this.Ac=fb();this.Ae=fb()}m=sk.prototype;m.exec=function(){this.Ae.resolve();return this.Ac.ha};m.I=l(1);m.da=g("aa");m.Rb=g("fb");m.W=function(){return ka(this)};m.getPriority=l(2);function tk(a){ze(a.Ia,a);return a.Ae.ha}
function uk(a,b){var c=b.Ec();return c.ke.ab().exec(a.Qa,c.context).then(function(a){return zd(a[0])},function(a){this.Qa.Mb();var b=new kb(a.name);this.Ac.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Na.Hb(this.I(),D(this.aa),this.Qa);this.ja.ka().then(function(){this.Pc();this.Ac.resolve()}.bind(this),function(a){this.Qa.Mb();this.Ac.reject(a)}.bind(this));return this.fb.ha};m.Mb=function(){this.Qa.Mb();this.Ac.resolve();return this.fb.ha};
m.Pc=function(){var a=ye(this.Lb,this.aa);0!=a.length&&(a=new ve(this.c,a),ze(this.Ia,a))};m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function W(a){this.c=a;this.Ia=a.b(pc);this.Nb=null;this.Sa=0;0==vk.size&&(vk.set(0,C([1,4])),vk.set(1,C([2])),vk.set(2,C([3,5,6])),vk.set(3,C([2,7])),vk.set(4,C([7])),vk.set(5,C([7])),vk.set(6,C([7])))}r("lf.proc.Transaction",W);var vk=y();function wk(a,b){var c=vk.get(a.Sa)||null;if(null===c||!c.has(b))throw new E(107,a.Sa,b);a.Sa=b}
W.prototype.exec=function(a){wk(this,4);var b=[];try{a.forEach(function(a){a.kb();b.push(a.Ec())},this)}catch(c){return wk(this,7),bb(c)}this.Nb=new Ch(this.c,b);return ze(this.Ia,this.Nb).then(function(a){wk(this,7);return a.map(function(a){return zd(a)})}.bind(this),function(a){wk(this,7);throw a;}.bind(this))};W.prototype.exec=W.prototype.exec;W.prototype.Hf=function(a){wk(this,1);this.Nb=new sk(this.c,a);return tk(this.Nb).then(function(){wk(this,2)}.bind(this))};W.prototype.begin=W.prototype.Hf;
W.prototype.Gf=function(a){wk(this,3);return uk(this.Nb,a).then(function(a){wk(this,2);return a}.bind(this),function(a){wk(this,7);throw a;}.bind(this))};W.prototype.attach=W.prototype.Gf;W.prototype.ka=function(){wk(this,5);return this.Nb.ka().then(function(){wk(this,7)}.bind(this))};W.prototype.commit=W.prototype.ka;W.prototype.Mb=function(){wk(this,6);return this.Nb.Mb().then(function(){wk(this,7)}.bind(this))};W.prototype.rollback=W.prototype.Mb;
W.prototype.Y=function(){if(7!=this.Sa)throw new E(105);return this.Nb.Y()};W.prototype.stats=W.prototype.Y;function X(a){this.c=a;this.g=a.b(rc);this.ld=!1}r("lf.proc.Database",X);X.prototype.Ea=function(a){this.c.ub(rc,this.g);return nk(this.c,a).then(function(){this.ld=!0;this.Ia=this.c.b(pc);return this}.bind(this))};X.prototype.init=X.prototype.Ea;X.prototype.Cb=g("g");X.prototype.getSchema=X.prototype.Cb;function xk(a){if(!a.ld)throw new E(2);}X.prototype.select=function(a){xk(this);return new V(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
X.prototype.select=X.prototype.select;X.prototype.Db=function(){xk(this);return new bi(this.c)};X.prototype.insert=X.prototype.Db;X.prototype.Yd=function(){xk(this);return new bi(this.c,!0)};X.prototype.insertOrReplace=X.prototype.Yd;X.prototype.update=function(a){xk(this);return new li(this.c,a)};X.prototype.update=X.prototype.update;X.prototype.delete=function(){xk(this);return new ai(this.c)};X.prototype["delete"]=X.prototype.delete;
X.prototype.observe=function(a,b){xk(this);this.c.b(qc).Ed(a,b)};X.prototype.observe=X.prototype.observe;X.prototype.unobserve=function(a,b){xk(this);this.c.b(qc).ne(a,b)};X.prototype.unobserve=X.prototype.unobserve;X.prototype.Qf=function(){xk(this);return new W(this.c)};X.prototype.createTransaction=X.prototype.Qf;X.prototype.close=function(){try{this.c.b(lc).close()}catch(a){}this.c.clear();this.ld=!1};X.prototype.close=X.prototype.close;
X.prototype.$f=function(){xk(this);var a=new ok(this.c);return ze(this.Ia,a).then(function(a){return zd(a[0])[0]})};X.prototype["export"]=X.prototype.$f;X.prototype.import=function(a){xk(this);a=new qk(this.c,a);return ze(this.Ia,a).then(l(null))};X.prototype["import"]=X.prototype.import;function Y(a,b,c,d,e,f){this.U=a;this.A=b;this.Ye=c;this.We=d;this.zf=e;this.jb=f||null}r("lf.schema.BaseColumn",Y);m=Y.prototype;m.getName=g("A");m.j=function(){return Jd(this.U)+"."+this.A};m.toString=function(){return this.j()};m.H=g("U");m.I=g("zf");Y.prototype.getType=Y.prototype.I;Y.prototype.$a=g("jb");Y.prototype.Da=function(){null==this.ta&&(this.ta=[],this.H().Da().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.A)&&this.ta.push(a)},this));return this.ta};
Y.prototype.Ca=function(){if(!q(this.fa)){var a=this.Da().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};Y.prototype.kc=g("We");Y.prototype.isNullable=Y.prototype.kc;Y.prototype.Gc=g("Ye");Y.prototype.Pa=function(a){return Ng(this,a,"eq")};Y.prototype.eq=Y.prototype.Pa;Y.prototype.ef=function(a){return Ng(this,a,"neq")};Y.prototype.neq=Y.prototype.ef;Y.prototype.tg=function(a){return Ng(this,a,"lt")};
Y.prototype.lt=Y.prototype.tg;Y.prototype.ug=function(a){return Ng(this,a,"lte")};Y.prototype.lte=Y.prototype.ug;Y.prototype.cg=function(a){return Ng(this,a,"gt")};Y.prototype.gt=Y.prototype.cg;Y.prototype.dg=function(a){return Ng(this,a,"gte")};Y.prototype.gte=Y.prototype.dg;Y.prototype.match=function(a){return Ng(this,a,"match")};Y.prototype.match=Y.prototype.match;Y.prototype.If=function(a,b){return Ng(this,[a,b],"between")};Y.prototype.between=Y.prototype.If;
Y.prototype.eg=function(a){return Ng(this,a,"in")};Y.prototype["in"]=Y.prototype.eg;Y.prototype.og=function(){return this.Pa(null)};Y.prototype.isNull=Y.prototype.og;Y.prototype.ng=function(){return this.ef(null)};Y.prototype.isNotNull=Y.prototype.ng;Y.prototype.uc=function(a){return new Y(this.U,this.A,this.Ye,this.We,this.zf,a)};Y.prototype.as=Y.prototype.uc;function yk(a){this.g=a;this.Kd=new Sc;this.oe=new Sc;this.gf=new Sc;this.Je=y();this.h=new Sc;this.Fe=new Sc;this.pf=new Sc;this.Ie=new Sc;zk(this)}function zk(a){a.g.pa().forEach(function(a){var c=a.getName();a.Jb().Xd().forEach(function(d){this.gf.set(c,this.g.table(d.Wa));this.h.set(d.Wa,a);0==d.action?(this.oe.set(d.Wa,d),this.pf.set(d.Wa,a)):(this.Kd.set(d.Wa,d),this.Fe.set(d.Wa,a));this.Je.set(a.getName()+"."+d.yb,d.Wa);this.Ie.set(d.Wa+"."+d.Mc,a.getName())},this)},a)}
function ad(a,b,c){if(null!=c)return 1==c?a.Kd.get(b):a.oe.get(b);c=a.Kd.get(b);a=a.oe.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Ih(a,b){var c=b.get(a);return null===c?[]:c}function Kh(a,b){var c=C();b.forEach(function(a){(a=this.Je.get(a))&&c.add(a)},a);return D(c).map(function(a){return this.g.table(a)},a)}function Gh(a,b,c){return null!=c?0==c?Ih(b,a.pf):Ih(b,a.Fe):Ih(b,a.h)}
function Lh(a,b){var c=C();b.forEach(function(a){(a=this.Ie.get(a))&&a.forEach(function(a){c.add(a)})},a);return D(c).map(function(a){return this.g.table(a)},a)};function Ak(a,b,c){this.Hg=a;this.zg=b;this.ag=c}r("lf.schema.Constraint",Ak);Ak.prototype.ed=g("Hg");Ak.prototype.getPrimaryKey=Ak.prototype.ed;Ak.prototype.Xd=g("ag");Ak.prototype.getForeignKeys=Ak.prototype.Xd;function Bk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new E(540,c);this.He=b;this.yb=a.local;this.Wa=d[0];this.Mc=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Z(a){Ck(a);this.Sd=Vd();this.A=a;this.K=y();this.Bd=C();this.qc=C();this.qd=C();this.Fa=null;this.ta=y();this.ud=!1;this.Bb=[]}r("lf.schema.TableBuilder",Z);function Dk(a){this.name=a.name;this.sb=a.order;this.autoIncrement=a.autoIncrement}var Ek=C([0,6]);function Ck(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new E(502,a);}function Fk(a,b){if(b==a.A)throw new E(546,b);if(a.K.has(b)||a.ta.has(b)||a.qc.has(b))throw new E(503,a.A+"."+b);}
function Gk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new E(504);},a);if(c&&1<b.length)throw new E(505);}function Hk(a){if(null!==a.Fa){var b=a.ta.get(a.Fa).map(function(a){return a.name}),c=0;if(a.Bb.some(function(a,e){c=e;return-1!=b.indexOf(a.yb)},a))throw new E(543,a.Bb[c].name);}}
function Ik(a){if(null!==a.Fa){var b=function(a){return a.name},c=JSON.stringify(a.ta.get(a.Fa).map(b));a.ta.forEach(function(a,e){if(e!=this.Fa){var f=a.map(b);if(JSON.stringify(f)==c)throw new E(544,this.A+"."+e);}},a)}}function Jk(a){null===a.Fa||a.ta.get(a.Fa).forEach(function(a){if(this.qd.has(a.name))throw new E(545,this.A+"."+a.name);},a)}Z.prototype.Bf=function(a,b){Ck(a);Fk(this,a);this.K.set(a,b);Ek.has(b)&&this.Ce([a]);return this};Z.prototype.addColumn=Z.prototype.Bf;
Z.prototype.Df=function(a,b){var c=this.A;this.Fa="pk"+(c[0].toUpperCase()+c.substring(1));Ck(this.Fa);Fk(this,this.Fa);c=Kk(this,a,!0,void 0,b);Gk(this,c);1==c.length&&this.Bd.add(c[0].name);this.qc.add(this.Fa);this.ta.set(this.Fa,c);return this};Z.prototype.addPrimaryKey=Z.prototype.Df;
Z.prototype.Cf=function(a,b){Ck(a);Fk(this,a);var c=new Bk(b,this.A,a);q(c.action)||(c.action=0);q(c.timing)||(c.timing=0);if(1==c.action&&1==c.timing)throw new E(506);if(!this.K.has(c.yb))throw new E(540,a);this.Bb.push(c);this.Be(a,[c.yb],this.Bd.has(c.yb));return this};Z.prototype.addForeignKey=Z.prototype.Cf;Z.prototype.Ef=function(a,b){Ck(a);Fk(this,a);var c=Kk(this,b,!0);1==c.length&&(this.Bd.add(c[0].name),Lk(this,c[0].name));this.ta.set(a,c);this.qc.add(a);return this};
Z.prototype.addUnique=Z.prototype.Ef;function Lk(a,b){a.Bb.forEach(function(a){a.yb==b&&this.qc.add(a.name.split(".")[1])},a)}Z.prototype.Ce=function(a){Kk(this,a,!1).forEach(function(a){this.qd.add(a.name)},this);return this};Z.prototype.addNullable=Z.prototype.Ce;Z.prototype.Be=function(a,b,c,d){Ck(a);Fk(this,a);b=Kk(this,b,!0,d);c&&this.qc.add(a);this.ta.set(a,b);return this};Z.prototype.addIndex=Z.prototype.Be;Z.prototype.Fb=ba("ud");Z.prototype.persistentIndex=Z.prototype.Fb;
Z.prototype.Cb=function(){Hk(this);Ik(this);Jk(this);return new (Mk(this))};Z.prototype.getSchema=Z.prototype.Cb;function Nk(a){return a.Bb}function Kk(a,b,c,d,e){var f=b,f="string"==typeof b[0]?b.map(function(a){return new Dk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Dk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new E(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new E(509,this.A,a.name);}},a);return f}
function Mk(a){function b(){function b(c){return a.ta.get(c).map(function(a){return{ba:this[a.name],sb:a.sb,autoIncrement:a.autoIncrement}},this)}var d=Wb(a.K).map(function(b){this[b]=new Y(this,b,a.Bd.has(b),a.qd.has(b),a.K.get(b));return this[b]},this),e=Wb(a.ta).map(function(d){return new Pg(a.A,d,a.qc.has(d),b.call(this,d))},this);R.call(this,a.A,d,e,a.ud);var f=null===a.Fa?null:new Pg(a.A,a.Fa,!0,b.call(this,a.Fa)),h=d.filter(function(b){return!a.qd.has(b.getName())});this.Nf=new Ak(f,h,a.Bb);
this.sf=Ok(a,d,e)}t(b,R);b.prototype.Ab=function(a){return new this.sf(Yb++,a)};b.prototype.createRow=b.prototype.Ab;b.prototype.mb=function(a){var b={};this.nb().forEach(function(e){var f=e.getName();e=e.I();var h=a.value[f];if(0==e)if(e=h,null!=e&&""!=e){0!=e.length%2&&(e="0"+e);for(var h=new ArrayBuffer(e.length/2),k=new Uint8Array(h),n=0,B=0;n<e.length;n+=2)k[B++]=parseInt(e.substr(n,2),16);e=h}else e=null;else e=2==e?null!=h?new Date(h):null:h;b[f]=e},this);return new this.sf(a.id,b)};b.prototype.deserializeRow=
b.prototype.mb;b.prototype.Jb=g("Nf");b.prototype.getConstraint=b.prototype.Jb;return b}
function Ok(a,b,c){function d(a,d){this.K=b;this.ta=c;Xb.call(this,a,d)}t(d,Xb);d.prototype.Le=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.kc()?null:Rc[b.I()]});return a};d.prototype.yf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.I();var d=this.m[c];a[c]=0==b?null!=d?ac(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Sd.Ze.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.pb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.m):null};return d};function Pk(a,b){this.g=new Qk(a,b);this.wb=y();this.Bc=!1;this.i=null}r("lf.schema.Builder",Pk);function Rk(a,b){b.Bb.forEach(function(a){var d=a.Wa;if(!this.wb.has(d))throw new E(536,a.name);var d=this.wb.get(d).Cb(),e=a.Mc;if(!d.hasOwnProperty(e))throw new E(537,a.name);if(b.Cb()[a.yb].I()!=d[e].I())throw new E(538,a.name);if(!d[e].Gc())throw new E(539,a.name);},a)}
Pk.prototype.Mf=function(a){a.Bb.forEach(function(a){Nk(this.wb.get(a.Wa)).forEach(function(c){if(c.yb==a.Mc)throw new E(534,a.name);},this)},this)};function Sk(a){a.Bc||(a.wb.forEach(function(a){Rk(this,a);a=a.Cb();this.g.M.set(a.getName(),a)},a),z(a.wb).forEach(a.Mf,a),Tk(a),a.wb.clear(),a.Bc=!0)}function Uk(a,b,c){b.ze||(b.ze=!0,b.ge=!0,b.Me.forEach(function(a){a=c.get(a);if(!a.ze)Uk(this,a,c);else if(a.ge&&b!=a)throw new E(533);},a));b.ge=!1}
function Tk(a){var b=y();a.g.M.forEach(function(a,d){b.set(d,new Vk(d))},a);a.wb.forEach(function(a,d){a.Bb.forEach(function(a){b.get(a.Wa).Me.add(d)})});z(b).forEach(function(a){Uk(this,a,b)},a)}function Vk(a){this.ge=this.ze=!1;this.Me=C();this.pc=a}Pk.prototype.Cb=function(){this.Bc||Sk(this);return this.g};Pk.prototype.getSchema=Pk.prototype.Cb;Pk.prototype.Qe=function(){var a=new kc("ns_"+this.g.name()),b=Yj(),c=null;b.pd(a)?c=b.b(a):(c=new Wj,b.ub(a,c));return c};Pk.prototype.getGlobal=Pk.prototype.Qe;
Pk.prototype.connect=function(a){if(null!==this.i&&this.i.ld)throw new E(113);if(null===this.i){var b=this.Qe();b.pd(rc)||b.ub(rc,this.Cb());this.i=new X(b)}return this.i.Ea(a)};Pk.prototype.connect=Pk.prototype.connect;Pk.prototype.Pf=function(a){if(this.wb.has(a))throw new E(503,a);if(this.Bc)throw new E(535);this.wb.set(a,new Z(a));return this.wb.get(a)};Pk.prototype.createTable=Pk.prototype.Pf;Pk.prototype.te=function(a){if(this.Bc)throw new E(535);this.g.te(a);return this};
Pk.prototype.setPragma=Pk.prototype.te;function Qk(a,b){this.A=a;this.Ta=b;this.M=y();this.lf={Vf:!1}}r("lf.schema.DatabaseSchema",Qk);Qk.prototype.name=g("A");Qk.prototype.name=Qk.prototype.name;Qk.prototype.version=g("Ta");Qk.prototype.version=Qk.prototype.version;Qk.prototype.pa=function(){return z(this.M)};Qk.prototype.tables=Qk.prototype.pa;Qk.prototype.table=function(a){if(!this.M.has(a))throw new E(101,a);return this.M.get(a)};Qk.prototype.table=Qk.prototype.table;
Qk.prototype.info=function(){this.Ve||(this.Ve=new yk(this));return this.Ve};Qk.prototype.kf=g("lf");Qk.prototype.pragma=Qk.prototype.kf;Qk.prototype.te=ba("lf");r("lf.schema.create",function(a,b){return new Pk(a,b)});v.prototype.catch=v.prototype.we;v.prototype["catch"]=v.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))()
//# sourceMappingURL=lovefield.min.js.map
